[{"title":"Chronyd å®‰è£…ä¸é…ç½®æ’é”™æŒ‡å—","url":"/2025/09/07/Chronyd-%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE%E6%8E%92%E9%94%99%E6%8C%87%E5%8D%97/","content":"Chronyd å®‰è£…ä¸é…ç½®æ’é”™æŒ‡å—ç›®å½•\nChronyd å®‰è£…ä¸é…ç½®\nç«¯å£æ£€æŸ¥ä¸é˜²ç«å¢™é…ç½®\næ—¶é—´åŒæ­¥çŠ¶æ€è¯Šæ–­\nç¡¬ä»¶æ—¶é’Ÿé—®é¢˜è§£å†³æ–¹æ¡ˆ\næ—¶åŒºé…ç½®\n\n\n1. Chronyd å®‰è£…ä¸é…ç½®å®‰è£… Chronydyum install chronyd -y\n\næ£€æŸ¥æ—¶é—´åŒæ­¥æºchronyc sources -v\n\néªŒè¯ Chronyd æœåŠ¡çŠ¶æ€netstat -nlap | grep 123  # æŸ¥çœ‹ UDP ç«¯å£ï¼Œç¡®è®¤ chronyd å·²å¯åŠ¨\n\n\n2. ç«¯å£æ£€æŸ¥ä¸é˜²ç«å¢™é…ç½®æ£€æŸ¥ UDP ç«¯å£è¿é€šæ€§# æ–¹æ¡ˆ1ï¼šä½¿ç”¨ nmapnmap -sU 192.168.70.2 -p 123 -Pn# æ–¹æ¡ˆ2ï¼šä½¿ç”¨ netcatnc -uvz 192.168.70.2 123\n\nç«¯å£çŠ¶æ€è¯´æ˜\næ­£å¸¸çŠ¶æ€: 123/udp open ntp\nå¼‚å¸¸çŠ¶æ€: 123/udp open|filtered ntp (è¡¨ç¤ºç«¯å£ä¸å¯ç”¨)\n\né…ç½®é˜²ç«å¢™è§„åˆ™ (UFW ç¤ºä¾‹)# æŸ¥çœ‹å½“å‰é˜²ç«å¢™è§„åˆ™ufw status# å¼€æ”¾ NTP æœåŠ¡æ‰€éœ€ç«¯å£ufw allow 123/udpufw allow 323/udp\n\n\n3. æ—¶é—´åŒæ­¥çŠ¶æ€è¯Šæ–­å¼‚å¸¸çŠ¶æ€ç¤ºä¾‹# æ£€æŸ¥ chrony æœåŠ¡çŠ¶æ€chronyc sources# å¼‚å¸¸è¾“å‡ºç¤ºä¾‹ï¼š210 Number of sources = 1MS Name/IP address         Stratum Poll Reach LastRx Last sample===============================================================================^? 192.168.70.2                  0   9     0     -     +0ns[   +0ns] +/-    0ns\n\næ­£å¸¸çŠ¶æ€ç¤ºä¾‹# æ­£å¸¸è¾“å‡ºç¤ºä¾‹ï¼š210 Number of sources = 1MS Name/IP address         Stratum Poll Reach LastRx Last sample===============================================================================^* 192.168.70.2                 10   6    17     1    -12us[+23us] +/- 276us\n\n\n4. ç¡¬ä»¶æ—¶é’Ÿé—®é¢˜è§£å†³æ–¹æ¡ˆæ£€æŸ¥å½“å‰æ—¶é—´çŠ¶æ€date                    # æŸ¥çœ‹ç³»ç»Ÿæ—¶é—´hwclock --show          # æŸ¥çœ‹ç¡¬ä»¶æ—¶é’Ÿæ—¶é—´\n\nç¡¬ä»¶æ—¶é’ŸåŒæ­¥æ“ä½œ# æ‰‹åŠ¨è®¾ç½®ç¡¬ä»¶æ—¶é’Ÿæ—¶é—´hwclock --set --date &#x27;2018-08-20 14:05:25&#x27;# åŒæ­¥ç¡¬ä»¶æ—¶é’Ÿä¸ç³»ç»Ÿæ—¶é—´hwclock --hctosys       # ç¡¬ä»¶æ—¶é—´åŒæ­¥åˆ°ç³»ç»Ÿæ—¶é—´hwclock --systohc       # ç³»ç»Ÿæ—¶é—´åŒæ­¥åˆ°ç¡¬ä»¶æ—¶é—´# ä¿å­˜æ—¶é’Ÿè®¾ç½®clock -w\n\né«˜çº§æ—¶é—´ç®¡ç†# æŸ¥çœ‹æ—¶é—´åŒæ­¥æºçŠ¶æ€chronyc sourcestats -v# ç«‹å³æ‰‹åŠ¨åŒæ­¥æ—¶é—´ï¼ˆé€‚ç”¨äºæ—¶é—´åå·®è¾ƒå¤§æ—¶ï¼‰chronyc -a makestep# æ ¡å‡†æ—¶é—´æœåŠ¡å™¨chronyc tracking\n\nç¡¬ä»¶æ—¶é’Ÿé…ç½®# æ£€æŸ¥ç¡¬ä»¶æ—¶é’Ÿé…ç½®timedatectl | grep local# é…ç½®ç¡¬ä»¶æ—¶é’Ÿä½¿ç”¨æœ¬åœ°æ—¶åŒºtimedatectl set-local-rtc 1# é…ç½®ç¡¬ä»¶æ—¶é’Ÿä½¿ç”¨ UTCï¼ˆæ¨èï¼‰timedatectl set-local-rtc 0# å¯ç”¨ NTP æ—¶é—´åŒæ­¥timedatectl set-ntp yes\n\n\n5. æ—¶åŒºé…ç½®æ›´æ”¹æ—¶åŒºï¼ˆä¾‹å¦‚ä» EST æ”¹ä¸º CSTï¼‰# å¤‡ä»½åŸæ—¶åŒºé…ç½®mv /etc/localtime /etc/localtime.bak# è®¾ç½®ä¸Šæµ·æ—¶åŒºï¼ˆä¸­å›½æ ‡å‡†æ—¶é—´ CSTï¼‰ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\n\n\næ•…éšœæ’é™¤æµç¨‹å›¾\næ—¶é—´ä¸åŒæ­¥\næ£€æŸ¥ chronyc sources è¾“å‡º\néªŒè¯ NTP ç«¯å£è¿é€šæ€§\nç¡®è®¤é˜²ç«å¢™é…ç½®\n\n\nç¡¬ä»¶æ—¶é’Ÿä¸ç³»ç»Ÿæ—¶é—´ä¸ä¸€è‡´\nä½¿ç”¨ hwclock --hctosys æˆ– hwclock --systohc åŒæ­¥\næ£€æŸ¥æ—¶åŒºè®¾ç½®æ˜¯å¦æ­£ç¡®\n\n\næ—¶åŒºé”™è¯¯\nä½¿ç”¨ timedatectl æ£€æŸ¥å½“å‰æ—¶åŒº\né‡æ–°é“¾æ¥æ­£ç¡®çš„æ—¶åŒºæ–‡ä»¶\n\n\n\n\nå¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨\n\n\nå‘½ä»¤\nåŠŸèƒ½æè¿°\n\n\n\nchronyc sources\næŸ¥çœ‹æ—¶é—´åŒæ­¥æºçŠ¶æ€\n\n\nchronyc -a makestep\nç«‹å³å¼ºåˆ¶æ—¶é—´åŒæ­¥\n\n\nhwclock --hctosys\nç¡¬ä»¶æ—¶é—´åŒæ­¥åˆ°ç³»ç»Ÿæ—¶é—´\n\n\nhwclock --systohc\nç³»ç»Ÿæ—¶é—´åŒæ­¥åˆ°ç¡¬ä»¶æ—¶é—´\n\n\ntimedatectl set-local-rtc 1\nè®¾ç½®ç¡¬ä»¶æ—¶é’Ÿä½¿ç”¨æœ¬åœ°æ—¶åŒº\n\n\ntimedatectl set-ntp yes\nå¯ç”¨ NTP æ—¶é—´åŒæ­¥\n\n\n\né€‚ç”¨ç³»ç»Ÿ: CentOS&#x2F;RHEL 7+ã€Ubuntu 16.04+\n\næç¤ºï¼šç”Ÿäº§ç¯å¢ƒä¸­å»ºè®®å°†ç¡¬ä»¶æ—¶é’Ÿè®¾ç½®ä¸º UTC (timedatectl set-local-rtc 0)ï¼Œå¹¶ç¡®ä¿é˜²ç«å¢™æ­£ç¡®é…ç½®å…è®¸ NTP æµé‡ã€‚\n\n","categories":["Linux"],"tags":["chrony"]},{"title":"ESåŸºæœ¬ä½¿ç”¨åŠé—®é¢˜å¤„ç†01","url":"/2025/09/08/ES%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E5%8F%8A%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%8601/","content":"é¡¹ç›®é—®é¢˜1ï¼šä¸šåŠ¡è¿›è¡Œå‹æµ‹ï¼Œåé¢é€ æˆESæ•°æ®æ»¡äº†ï¼Œæœ‰90%å‘Šè­¦ã€‚é’ˆå¯¹è¯¥æƒ…å†µéœ€è¦æ¸…ç†ESï¼Œæ•°æ®å¯ä»¥æ­£å¸¸å†™å…¥ã€‚\næ¸…ç†æ•°æ®curl -I -m 10 -o /dev/null -s -w %&#123;http_code&#125; -X GET &quot;$&#123;dst_es_schema&#125;://$&#123;dst_es_user&#125;:$&#123;dst_es_passwd&#125;@$&#123;dst_es_host&#125;:$&#123;dst_es_port&#125;/_cluster/health?pretty&quot;# å¦‚éœ€ç”¨æˆ·åä¸å¯†ç åˆ™éœ€ curl -u xxx:&#x27;xxx&#x27;, å¯†ç æœ‰ç‰¹æ®Šå­—ç¬¦å¯ç”¨å•å¼•å·curl 10.25.83.242:9200/_cluster/health?pretty #æŸ¥çœ‹ç›‘æ§curl 10.25.83.242:9200/_cat/indices?v |grep gb #æŸ¥çœ‹æ•°æ®curl -XDELETE 10.25.83.242:9200/xxxxx #åˆ é™¤æ•°æ®\n\nåŸå› åˆ†æåªè¯»æ ‡è®°æœªæ‰‹åŠ¨æ¸…é™¤ï¼šè¿™æ˜¯æœ€å¸¸è§çš„åŸå› ã€‚Elasticsearch ä¸ä¼šè‡ªåŠ¨å°†ç´¢å¼•çš„ read_only_allow_delete å±æ€§æ”¹å› false\nç£ç›˜ç©ºé—´æœªçœŸæ­£æœ‰æ•ˆé‡Šæ”¾ï¼š\n\nå»¶è¿Ÿé‡Šæ”¾ï¼šä½¿ç”¨ DELETE æ“ä½œæˆ– _delete_by_query è¿›è¡Œæ•°æ®åˆ é™¤æ—¶ï¼ŒElasticsearch é‡‡ç”¨çš„æ˜¯â€œæ ‡è®°åˆ é™¤â€è€Œéç«‹å³ä»ç£ç›˜æ“¦é™¤ã€‚çœŸæ­£çš„ç©ºé—´é‡Šæ”¾éœ€è¦ç­‰å¾… Segment Merge è¿‡ç¨‹å®Œæˆã€‚\n\næ¸…ç†é‡ä¸è¶³ï¼šå¯èƒ½åˆ é™¤çš„æ•°æ®é‡ä¸è¶³ä»¥è®©æ‰€æœ‰ç£ç›˜çš„ä½¿ç”¨ç‡éƒ½é™åˆ°æ°´ä½çº¿ï¼ˆç‰¹åˆ«æ˜¯ flood_stage, ä¾‹å¦‚95%ï¼‰ä»¥ä¸‹ã€‚Elasticsearch ä¼šæ£€æŸ¥æ‰€æœ‰èŠ‚ç‚¹ç£ç›˜ç©ºé—´ã€‚\n\n\næ°´ä½çº¿æ£€æŸ¥æœ‰å»¶è¿Ÿæˆ–ç¼“å­˜ï¼šElasticsearch æ£€æµ‹ç£ç›˜ç©ºé—´å’Œä½¿ç”¨ç‡å˜åŒ–å¯èƒ½å­˜åœ¨çŸ­æš‚å»¶è¿Ÿã€‚\nåˆ†ç‰‡åˆ†é…é—®é¢˜ï¼šå³ä½¿ç©ºé—´è¶³å¤Ÿï¼Œå¦‚æœä¹‹å‰å› ç£ç›˜ç©ºé—´ä¸è¶³å¯¼è‡´åˆ†ç‰‡æœªåˆ†é…ï¼Œç©ºé—´é‡Šæ”¾åå¯èƒ½éœ€è¦æ‰‹åŠ¨æ¢å¤åˆ†ç‰‡åˆ†é…æˆ–ç­‰å¾…é›†ç¾¤è‡ªåŠ¨é‡æ–°å¹³è¡¡ã€‚\nğŸ“– æ€»ç»“ï¼šé—®é¢˜è§£å†³æ­¥éª¤\n\n\næ­¥éª¤\næ“ä½œ\nå‘½ä»¤&#x2F;æ“ä½œç¤ºä¾‹\nè¯´æ˜\n\n\n\n1ï¸âƒ£\nç¡®è®¤ç£ç›˜ç©ºé—´\nGET /_cat/allocation?v\næŸ¥çœ‹æ‰€æœ‰èŠ‚ç‚¹çš„ç£ç›˜ä½¿ç”¨ç‡ï¼Œç¡®ä¿å‡ä½äºæ´ªæ°´æ°´ä½çº¿ï¼ˆå¦‚95%ï¼‰\n\n\n2ï¸âƒ£\næ£€æŸ¥ç´¢å¼•è®¾ç½®\nGET your_index_name/_settings\nç¡®è®¤ index.blocks.read_only_allow_delete æ˜¯å¦ä¸º true\n\n\n3ï¸âƒ£\næ‰‹åŠ¨è§£é™¤åªè¯»\ncurl  -H â€œContent-Type:application&#x2F;jsonâ€ -XPUT 10.25.83.242:9200&#x2F;_cluster&#x2F;settings -d â€˜{   â€œpersistentâ€: {     â€œcluster.blocks.read_only_allow_deleteâ€: false   } }â€™\næ ¸å¿ƒæ­¥éª¤ï¼šæ‰‹åŠ¨æ¸…é™¤ç´¢å¼•çš„åªè¯»æ ‡è®°\n\n\n4ï¸âƒ£\nxxx\ncurl -H â€œContent-Type: application&#x2F;jsonâ€  -XPUT â€˜10.25.83.242:9200&#x2F;_all&#x2F;_settingsâ€™ -d â€˜{â€œindexâ€:{â€œblocksâ€:{â€œread_only_allow_deleteâ€:null}}}â€™\n\n\n\n5ï¸âƒ£\néªŒè¯å†™å…¥\nPOST your_index_name/_doc &#123; &quot;test&quot;: &quot;data&quot; &#125;\nå°è¯•å†™å…¥ä¸€æ¡æµ‹è¯•æ•°æ®ï¼ŒéªŒè¯æ˜¯å¦æˆåŠŸ\n\n\næ•°æ®è¿ç§»é¡¹ç›®èƒŒæ™¯ï¼šç›®å‰é¡¹ç›®ç”±ä¸¤å¥—ç¯å¢ƒï¼Œéœ€è¦å°†Aç¯å¢ƒçš„æ•°æ®è¿ç§»è‡³ç¯å¢ƒBã€‚é¡¹ç›®Bä¸­æœ¬èº«ä¹Ÿæœ‰æ•°æ®ã€‚æ•…éœ€æ±‚æ˜¯éœ€è¦å…ˆå°†é¡¹ç›®Bä¸­çš„ESæ•°æ®æ¸…ç©ºåå†å°†é¡¹ç›®Açš„ESæ•°æ®è¿ç§»è¿‡æ¥ã€‚å› ä¸ºAã€Bä¸¤ä¸ªç¯å¢ƒçš„ç½‘ç»œå¯ä¸´æ—¶å¼€é€šç«¯å£ä¸”ä¸¤ä¸ªç¯å¢ƒæ²¡æœ‰HDFSã€s3è¿™æ ·çš„å…±äº«æ–‡ä»¶ç³»ç»Ÿï¼Œä½†å¯éƒ¨ç½²ntfsç³»ç»Ÿã€‚æ•…eså¤‡ä»½æ¢å¤ä½¿ç”¨çš„æ˜¯multielasticdumpè¿›è¡Œçš„å¤‡ä»½ä¸æ¢å¤ã€‚\nå¤‡ä»½å·¥å…·åŒºåˆ«é€‰æ‹©\n\n\nç‰¹æ€§\nelasticdump\nmultielasticdump\n\n\n\næ ¸å¿ƒåŸç†\nå•è¿›ç¨‹å·¥å…·\nelasticdump çš„åŒ…è£…å™¨ï¼Œç®¡ç†å¤šä¸ªè¿›ç¨‹\n\n\nå¤„ç†æ–¹å¼\nä¸²è¡Œï¼šä¸€æ¬¡å¤„ç†ä¸€ä¸ªç´¢å¼•æˆ–ä¸€ç§æ•°æ®ç±»å‹\nå¹¶è¡Œï¼šåŒæ—¶å¤„ç†å¤šä¸ªç´¢å¼•\n\n\næ•ˆç‡\né€Ÿåº¦è¾ƒæ…¢ï¼Œå°¤å…¶å½“ç´¢å¼•å¾ˆå¤šæ—¶\né€Ÿåº¦éå¸¸å¿«ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸CPUå’Œç½‘ç»œå¸¦å®½\n\n\nä½¿ç”¨åœºæ™¯\nå¤‡ä»½æˆ–è¿ç§»å•ä¸ªæˆ–å°‘é‡å‡ ä¸ªç´¢å¼•\nå¤‡ä»½æˆ–è¿ç§»æ•´ä¸ªé›†ç¾¤æˆ–å¤§é‡ç´¢å¼•\n\n\nè¾“å‡ºç»“æ„\nè¾“å‡ºæ˜¯æŒ‡å®šçš„å•ä¸ªæ–‡ä»¶\nä¸ºæ¯ä¸ªç´¢å¼•åˆ›å»ºå­æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹å†…åŒ…å«è¯¥ç´¢å¼•çš„å„ç§ç±»å‹æ–‡ä»¶ï¼ˆdata, mappingç­‰ï¼‰\n\n\nèµ„æºå ç”¨\nå ç”¨èµ„æºè¾ƒå°‘\nå ç”¨èµ„æºè¾ƒå¤šï¼ˆCPUã€å†…å­˜ã€ç½‘ç»œè¿æ¥æ•°ï¼‰\n\n\næ§åˆ¶ç²’åº¦\né«˜ï¼šå¯ä»¥éå¸¸ç²¾ç»†åœ°æ§åˆ¶å•ä¸ªç´¢å¼•çš„ä¼ è¾“\nä½ï¼šä»¥ç´¢å¼•ä¸ºå•å…ƒè¿›è¡Œæ‰¹é‡æ“ä½œ\n\n\n\n\n\nç‰¹æ€§\nelasticdump &#x2F; multielasticdump\nElasticsearch å¿«ç…§&#x2F;æ¢å¤ (Snapshot&#x2F;Restore)\n\n\n\næ ¼å¼\nçº¯æ–‡æœ¬ JSON\nä¸“æœ‰çš„äºŒè¿›åˆ¶æ ¼å¼\n\n\nå¯è¯»æ€§\né«˜ã€‚å¯ä»¥ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ã€cat, head, jq ç­‰å·¥å…·ç›´æ¥æŸ¥çœ‹å’Œåˆ†æã€‚\nä½ã€‚åªèƒ½ç”± Elasticsearch æœ¬èº«è¯†åˆ«å’Œè§£æã€‚\n\n\nç”¨é€”\né€»è¾‘å¤‡ä»½ã€‚æ•°æ®è¿ç§»ã€å°‘é‡æ•°æ®æ¢å¤ã€æ•°æ®å®¡è®¡ã€è½¬æ¢æ ¼å¼ã€‚\nç‰©ç†å¤‡ä»½ã€‚å®Œæ•´çš„é›†ç¾¤å¿«ç…§ï¼Œç”¨äºç¾éš¾æ¢å¤ã€å…¨é‡å¤‡ä»½ã€‚\n\n\né€Ÿåº¦\nç›¸å¯¹è¾ƒæ…¢ï¼ˆéœ€è¦å°†äºŒè¿›åˆ¶æ•°æ®ç¼–ç ä¸ºJSONæ–‡æœ¬å¹¶ä¼ è¾“ï¼‰\néå¸¸å¿«ï¼ˆç›´æ¥æ‹·è´åº•å±‚çš„æ®µæ–‡ä»¶ï¼‰\n\n\nå­˜å‚¨ç©ºé—´\næ›´å¤§ï¼ˆæ–‡æœ¬æ ¼å¼é€šå¸¸æ¯”äºŒè¿›åˆ¶è¡¨ç¤ºæ›´å ç©ºé—´ï¼‰\næ›´å°ï¼ˆæ˜¯é«˜æ•ˆçš„äºŒè¿›åˆ¶å‹ç¼©æ ¼å¼ï¼‰\n\n\nç³»ç»Ÿè¦æ±‚\nä»»ä½•æœ‰æ–‡ä»¶ç³»ç»Ÿçš„åœ°æ–¹\nå¿…é¡»é…ç½®åœ¨æ”¯æŒçš„å¿«ç…§ä»“åº“ä¸­ï¼ˆå¦‚ S3, HDFS, NFS, å…±äº«FSï¼‰\n\n\næ•°æ®è¿ç§»è¿‡ç¨‹æŸ¥çœ‹æ•°æ®\ncurl [--user &lt;è´¦å·&gt;:&lt;å¯†ç &gt;] -XGET &#x27;&lt;ES_IP&gt;:9200/_cluster/health?pretty&#x27;1. ä½¿ç”¨ GET /_cat/indices å‘½ä»¤curl [--user &lt;è´¦å·&gt;:&lt;å¯†ç &gt;] -XGET &#x27;&lt;ES_IP&gt;:9200/_cat/indices?v&#x27; | grep red#æŸ¥çœ‹æ‰€æœ‰ç´¢å¼•curl -u elastic:&#x27;your_password&#x27; http://localhost:9200/_cat/indices?v\n\næ•°æ®æ¸…ç†,å°†æ‰€æœ‰çš„ç´¢å¼•çš„æ•°æ®éƒ½æ¸…ç†å¹²å‡€ã€‚ä¹Ÿå¯ä»¥ç”¨åˆ é™¤ç´¢å¼•çš„æ–¹å¼å°†å…¶éƒ½åˆ é™¤ã€‚\ncurl -u &quot;elastic:å¯†ç &quot; -X POST &quot;http://localhost:9200/&lt;ç´¢å¼•å&gt;/_delete_by_query&quot; -H &#x27;Content-Type: application/json&#x27; -d&#x27;&#123;  &quot;query&quot;: &#123;    &quot;match_all&quot;: &#123;&#125;  &#125;&#125;&#x27;\n\næ•°æ®å¤‡ä»½ï¼š\ndate_dir=`date +%Y%m%d`multielasticdump \\    --direction=dump \\    --match=&#x27;^.*$&#x27; \\    --includeType=&#x27;data,mapping,analyzer,alias,settings,template&#x27; \\    --input=http://$&#123;es_user&#125;:$&#123;es_passwd&#125;@$&#123;es_host&#125;:$&#123;es_port&#125; \\    --output=$backup_dir/elasticsearch-dump/$date_dir \n\næ•°æ®æ¢å¤\nmultielasticdump \\  --direction=load \\  --skip-existing \\  --match=&#x27;^.*$&#x27; \\  --includeType=&#x27;data,mapping,analyzer,alias,settings,template&#x27; \\  --ignoreChildError \\  --input=$backup_data \\  --output=http://$&#123;ES_USER&#125;:$&#123;ES_PASSWD&#125;@$ES_HOST:$ES_PORT\n\n","categories":["ä¸­é—´ä»¶"],"tags":["ES"]},{"title":"ETCDåŸºæœ¬ä½¿ç”¨åŠé—®é¢˜å¤„ç†01","url":"/2025/09/11/ETCD%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E5%8F%8A%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%8601/","content":"1.æ‹·è´etcdå‘½ä»¤å¹¶æŒ‡å®šå¹¶ä½¿ç”¨etcdctlv3çš„ç‰ˆæœ¬which etcdctl || docker cp $(docker ps | grep  etcd-10 | grep -v pause | awk &#x27;&#123;print $1&#125;&#x27;):/usr/local/bin/etcdctl  /usr/local/bin/export ETCDCTL_API=32.æŸ¥è¯¢etcd memberetcdctl --endpoints=https://127.0.0.1:2379  --cacert=/etc/kubernetes/pki/etcd/ca.crt  --cert=/etc/kubernetes/pki/etcd/server.crt --key=/etc/kubernetes/pki/etcd/server.key  member list --write-out=table3.3æŸ¥è¯¢etcd leaderetcdctl  --endpoints=10.0.3.1xx:2379,10.0.3.1yy:2379,10.0.3.2zz:2379  --cacert=/etc/kubernetes/pki/etcd/ca.crt  --cert=/etc/kubernetes/pki/etcd/server.crt --key=/etc/kubernetes/pki/etcd/server.key  endpoint status --write-out=table\n\n","categories":["ä¸­é—´"],"tags":["ETCD"]},{"title":"shellä¹‹è·å–dockerå®¹å™¨ä¸­çš„cpuä¸å†…å­˜ä½¿ç”¨ç‡","url":"/2025/09/06/shell%E4%B9%8B%E8%8E%B7%E5%8F%96docker%E5%AE%B9%E5%99%A8%E4%B8%AD%E7%9A%84cpu%E4%B8%8E%E5%86%85%E5%AD%98%E4%BD%BF%E7%94%A8%E7%8E%87/","content":"èƒŒæ™¯ï¼šè¯¥é¡¹ç›®è¿ç§»è‡³æ–°ç¯å¢ƒéœ€æ±‚ï¼Œå°†åŸå…ˆTSFé›†ç¾¤ï¼ˆèŠ‚ç‚¹æ•°ï¼šxxxï¼‰è¿ç§»åˆ°æ–°ç¯å¢ƒä¸­ï¼Œjmeter å‹æµ‹ä¸€ä¸ªæŸ¥è¯¢æ¥å£çš„æ•°æ®ã€‚åˆ†åˆ«åœ¨æ—§ç¯å¢ƒä¸æ–°ç¯å¢ƒçš„æ¥å£æ•°æ®è¿›è¡Œå‹æµ‹ï¼Œå¯¹æ¯”ç›‘æ§CPUã€å†…å­˜åˆ©ç”¨ç‡æƒ…å†µã€‚ç›®å‰æ—§ç¯å¢ƒå®¹å™¨æ— ç›‘æ§ï¼Œæ•…æ€è·¯ä¸Šä½¿ç”¨è„šæœ¬æ¥è·å–ç›‘æ§æ•°æ®ï¼Œè·å–çš„æ•°æ®ç”¨å›¾æ ‡å±•ç¤ºå‡ºæ¥ã€‚åº•å±‚çš„k8sæ¯”è¾ƒè€ï¼Œæš‚æœªæ”¯æŒkubectl  top  å®¹å™¨ã€‚\né—®é¢˜:ä¸ºä»€ä¹ˆä¸è¿›å…¥å®¹å™¨ä¸­æŸ¥çœ‹ï¼ŒtopæŸ¥çœ‹å®¹å™¨çš„èµ„æºä½¿ç”¨é‡ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨å®¹å™¨ä¸­è¿è¡Œ top å‘½ä»¤ï¼Œè™½ç„¶å¯ä»¥çœ‹åˆ°å®¹å™¨ä¸­æ¯ä¸ªè¿›ç¨‹çš„ CPU ä½¿ç”¨ç‡ï¼Œä½†æ˜¯ top ä¸­â€%Cpu(s)â€é‚£ä¸€è¡Œä¸­æ˜¾ç¤ºçš„æ•°å€¼ï¼Œå¹¶ä¸æ˜¯è¿™ä¸ªå®¹å™¨çš„ CPU æ•´ä½“ä½¿ç”¨ç‡ï¼Œè€Œæ˜¯å®¹å™¨å®¿ä¸»æœºçš„ CPU ä½¿ç”¨ç‡ã€‚\n#!/bin/bashHOST_NAME=$(hostname -I | awk &#x27;&#123;print $2&#125;&#x27;)LOG_FILE=&quot;/var/log/docker_stats_20250719_$HOST_NAME.log&quot;DOCKER_NAME=$(docker ps |grep  &quot;tsf_1/element-server&quot; |awk &#x27;&#123;print $1&#125;&#x27;)INTERVAL=5 # æ”¶é›†é—´éš”ï¼ˆç§’ï¼‰# åˆ›å»ºæ—¥å¿—æ–‡ä»¶å¹¶æ·»åŠ è¡¨å¤´echo &quot;æ—¶é—´æˆ³,å®¹å™¨ID,CPUä½¿ç”¨ç‡%,å†…å­˜ä½¿ç”¨ç‡%&quot; &gt; &quot;$LOG_FILE&quot;while true; do    # è·å–å½“å‰æ—¶é—´æˆ³    TIMESTAMP=$(date &#x27;+%H:%M:%S&#x27;)    # ä½¿ç”¨ top æ”¶é›† CPU ä½¿ç”¨ç‡ï¼ˆæå– %Cpu(s): åçš„æ•°å€¼ï¼‰    CPU_MEM_USAGE=$(docker stats $DOCKER_NAME --no-stream --format &quot;&#123;&#123;.Container&#125;&#125;,\\t&#123;&#123;.CPUPerc&#125;&#125;,\\t\\t&#123;&#123;.MemPerc&#125;&#125;&quot;)    echo $CPU_MEM_USAGE    #top -bn1 | grep &#x27;%Cpu&#x27; | awk &#x27;&#123;print &quot;CPUä½¿ç”¨ç‡: &quot; 100 - $8 &quot;%&quot;&#125;&#x27;    echo &quot;$TIMESTAMPï¼Œ $CPU_MEM_USAGE &quot;  &gt;&gt; &quot;$LOG_FILE&quot;    # ç­‰å¾…ä¸‹ä¸€æ¬¡æ”¶é›†    sleep $INTERVALdone\n\næœ€ååˆ¶ä½œå‡ºæ¥çš„å›¾æ ‡å¦‚ä¸‹ï¼š\n\nå…³äºå¾—åˆ°çš„æ•°æ®çš„ç–‘é—®çš„è®°å½•\nä»å›¾æ ‡ä¸Šå¯ä»¥å¾—å‡ºæœ‰çš„CPUè¶…100%äº†ï¼ŒåŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ­£å¸¸æ¥çœ‹è¿™ä¸ªCPUåº”è¯¥æ˜¯å¤šå°‘çš„\n\nç»å¯¹èµ„æºæ¶ˆè€—é‡\n\n307% = 3.07 ä¸ªé€»è¾‘ CPU æ ¸å¿ƒæ»¡è½½#è¡¨ç¤ºå®¹å™¨å½“å‰æ¯ç§’æ¶ˆè€— 3.07 æ ¸å¿ƒç§’çš„è®¡ç®—èµ„#ç›¸å½“äºï¼š 3 ä¸ªæ ¸å¿ƒ 100% æ»¡è½½ + ç¬¬ 4 ä¸ªæ ¸å¿ƒ 7% è´Ÿè½½ æˆ– 4 ä¸ªæ ¸å¿ƒå¹³å‡ 76.75% è´Ÿè½½\n\n\ndocker stats ä¸­æŸ¥çœ‹ ä»¥ä¸‹å‚æ•° docker æœ‰å…³cpué…ç½®çš„åŒºåˆ«ï¼š\n\n[root@x.x.x.x ~]# docker inspect 1f77b1a2b98e |grep -i cpu            &quot;CpuShares&quot;: 4096, #cpu requestçš„å€¼            &quot;NanoCpus&quot;: 0,            &quot;CpuPeriod&quot;: 100000,            &quot;CpuQuota&quot;: 400000, #cpu limitçš„å€¼            &quot;CpuRealtimePeriod&quot;: 0,            &quot;CpuRealtimeRuntime&quot;: 0,            &quot;CpusetCpus&quot;: &quot;9-12&quot;, #è¿è¡Œåœ¨å“ªä¸ªcpuä¸Š            &quot;CpusetMems&quot;: &quot;&quot;,            &quot;CpuCount&quot;: 0,            &quot;CpuPercent&quot;: 0,\n\n","categories":["å·¥å…·"],"tags":["docker","shell"]},{"title":"clickhouseåˆ†å¸ƒå¼åŸºæœ¬ä½¿ç”¨","url":"/2025/09/08/clickhouse%E5%88%86%E5%B8%83%E5%BC%8F%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/","content":"ç›®å‰clickhouseåˆ›å»ºæ˜¯2å‰¯æœ¬çš„,ä¸šåŠ¡é¡µé¢è®¿é—®clickhouse å‘ç°ä¸¤ä¸ªclickhouseçš„æ•°æ®ä¸åŒæ­¥ã€‚ä¸»è¦åŸå› æ˜¯æœªåˆ›å»ºåˆ†å¸ƒå¼clickhouseå®ä¾‹ã€‚ç›®å‰é’ˆå¯¹è¯¥åœºæ™¯è¿›è¡Œè®°å½•clickhouseåˆ†å¸ƒå¼çš„ä½¿ç”¨\nå®¹å™¨ç™»é™†clickhouseæ•°æ®åº“kubectl  exec -it -n sso     clickhouse-sso-test-clickhhouse-0-ss-0  -c clickhouse -- clickhouse-client --user root --password testclickhouse  \n\næˆ–è€…ä½¿ç”¨curlè¿æ¥clickhouseç›®å‰ä¸šåŠ¡å¯ä¾æ®ä½¿ç”¨æƒ…å†µï¼Œå¦‚ä½¿ç”¨ä»£ç è¿›è¡Œåˆ›å»ºã€‚æˆ–è€…ä½¿ç”¨å¯è§†åŒ–è§†å›¾è¿›è¡Œåˆ›å»ºã€‚\ncurl -X POST \\  &quot;http://10.25.83.231:8123/?user=root&amp;password=testclickhouse&quot; \\  -d &quot;create database test0814 on cluster defaultCluster;&quot;\n\nåˆ›å»ºåˆ†å¸ƒå¼åº“#test0813 ä¸ºæ•°æ®åº“å#defaultCluster çš„ ClickHouse é›†ç¾¤create database test0813 on cluster defaultCluster;\n\nåˆ›å»ºæœ¬åœ°è¡¨#SHOW CREATE TABLE test0813.local_table å¯æŸ¥çœ‹è¡¨ç»“æ„CREATE TABLE test0813.local_table ON CLUSTER defaultCluster(    event_date Date,    user_id UInt64,    action_type Enum(&#x27;login&#x27;, &#x27;logout&#x27;),    device Array(String))ENGINE = ReplicatedMergeTree(&#x27;/clickhouse/tables/&#123;shard&#125;/test0813/local_table&#x27;, &#x27;&#123;replica&#125;&#x27;)PARTITION BY toYYYYMM(event_date)ORDER BY (user_id, action_type)SETTINGS index_granularity = 8192;\n\nè¯´æ˜ï¼š\n1.test0813.local_tableï¼šåˆ›å»ºåœ¨ test0813 æ•°æ®åº“ä¸­çš„ local_table è¡¨\n2.ON CLUSTER defaultClusterï¼šåœ¨åä¸º defaultCluster çš„ ClickHouse é›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹ä¸Šåˆ›å»ºæ­¤è¡¨\n3.ReplicatedMergeTreeè¿™ä¸ªå¼•æ“ç”¨äºåˆ›å»ºå…·æœ‰å¤åˆ¶åŠŸèƒ½çš„è¡¨ï¼Œç¡®ä¿æ•°æ®åœ¨å¤šä¸ªå‰¯æœ¬ä¹‹é—´åŒæ­¥ã€‚\n\n\n\nè·¯å¾„ç»„ä»¶\nè¯´æ˜\nç¤ºä¾‹å€¼\n\n\n\n&#x2F;clickhouse&#x2F;tables\næ ¹è·¯å¾„ï¼ˆClickHouse çº¦å®šï¼‰\nå›ºå®šå€¼\n\n\n{shard}\nåˆ†ç‰‡æ ‡è¯†ç¬¦å ä½ç¬¦\n01, shard1\n\n\ntest0813\næ•°æ®åº“åç§°\næ‚¨çš„æ•°æ®åº“å\n\n\nlocal_table\næœ¬åœ°è¡¨åç§°\næ‚¨çš„è¡¨å\n\n\n4.PARTITION BY toYYYYMM(event_date) â€“ æŒ‰æœˆåˆ†åŒº\n5.ORDER BY (user_id, action_type) â€“ ä¸»é”®ç´¢å¼•\n6.SETTINGS index_granularity &#x3D; 8192 â€“ ç´¢å¼•ç²’åº¦\nç´¢å¼•ç²’åº¦ï¼šæ¯ 8192 è¡Œç”Ÿæˆä¸€ä¸ªç´¢å¼•æ ‡è®°æ€§èƒ½å½±å“ï¼šå€¼è¶Šå° â†’ ç´¢å¼•æ›´ç²¾ç»† â†’ æŸ¥è¯¢æ›´å¿« â†’ ç´¢å¼•æ›´å¤§å€¼è¶Šå¤§ â†’ ç´¢å¼•æ›´ç²—ç³™ â†’ æŸ¥è¯¢ç¨æ…¢ â†’ ç´¢å¼•æ›´å°é»˜è®¤å€¼ï¼š8192ï¼ˆå¹³è¡¡é€‰æ‹©ï¼‰\n\n\n\nåˆ›å»ºåˆ†å¸ƒå¼è¡¨CREATE TABLE test0813.user_data ON CLUSTER defaultCluster(    event_date Date,    user_id UInt64,    action_type Enum(&#x27;login&#x27;, &#x27;logout&#x27;),    device Array(String))ENGINE = Distributed(    defaultCluster,   -- é›†ç¾¤åç§°    &#x27;test0813&#x27;,       -- æ•°æ®åº“å    &#x27;local_table&#x27;,    -- åº•å±‚æœ¬åœ°è¡¨å    rand()            -- åˆ†ç‰‡é”®ï¼ˆéšæœºåˆ†å¸ƒï¼‰);\n\næ’å…¥æ•°æ®# é€šè¿‡åˆ†å¸ƒå¼è¡¨æ’å…¥ï¼ˆè‡ªåŠ¨è·¯ç”±ï¼‰INSERT INTO test0813.user_data VALUES    (&#x27;2023-08-11&#x27;, 1001, &#x27;login&#x27;, [&#x27;iPhone&#x27;,&#x27;iOS 15&#x27;]),    (&#x27;2023-08-11&#x27;, 1002, &#x27;logout&#x27;, [&#x27;Android&#x27;,&#x27;Chrome&#x27;]),    (&#x27;2023-08-12&#x27;, 1003, &#x27;login&#x27;, [&#x27;Windows&#x27;,&#x27;Firefox&#x27;]);\n\nåˆ é™¤æ•°æ®#å®‰å…¨åˆ é™¤åˆ†å¸ƒå¼è¡¨ï¼Œåˆ é™¤åˆ†å¸ƒå¼è¡¨ï¼ˆä¸å½±å“æ•°æ®ï¼‰DROP TABLE IF EXISTS test0813.user_data ON CLUSTER defaultCluster#åˆ é™¤æœ¬åœ°è¡¨ï¼ˆæ°¸ä¹…åˆ é™¤æ•°æ®ï¼‰DROP TABLE IF EXISTS test0813.local_table ON CLUSTER defaultCluster\n\nå…¶ä»–è¯´æ˜\nåˆ›å»ºå¤šå¼ è¡¨ï¼Œæ˜¯å¦éœ€è¦åˆ›å»ºå¤šå¼ local_tableçš„è¡¨ï¼Ÿéœ€è¦çš„\néœ€è¦å…³é—­ä¸€å°èŠ‚ç‚¹ï¼ŒæŸ¥çœ‹æ•°æ®æ˜¯å¦åŒæ­¥ã€‚ä¼šåŒæ­¥çš„\n\n","categories":["ä¸­é—´ä»¶"],"tags":["clickhouse"]},{"title":"ã€fioã€‘çš„åŸºæœ¬ä½¿ç”¨ä¹‹ç£ç›˜æ€§èƒ½æµ‹è¯•","url":"/2025/09/14/%E3%80%90fio%E3%80%91%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E4%B9%8B%E7%A3%81%E7%9B%98%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/","content":"ã€æ³¨æ„ã€‘ï¼šfio å¯¹å‚æ•°æ ¼å¼å¾ˆä¸¥æ ¼ï¼Œå¤šä½™çš„ç©ºæ ¼ä¼šå¯¼è‡´è§£æå¤±è´¥\nfio æŸ¥çœ‹çš„æ–¹é¢æœ‰ï¼Œå»¶æ—¶ã€ååé‡ã€IOPSã€‚\nç›®å‰é’ˆå¯¹ç£ç›˜çš„æ€§èƒ½ä½¿ç”¨fioçš„å‹æµ‹ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†4Kã€ä¸256Kçš„æµ‹è¯•æ–¹å¼å°†ç£ç›˜çš„åˆ©ç”¨ç‡æ‰“æ»¡ï¼Œå¯ä»¥åé¦ˆç£ç›˜çš„æœ€å¤§æ€§èƒ½ã€‚åŒæ­¥æˆ‘ä»¬æŸ¥çœ‹å¸¦å®½æ€§èƒ½ã€IOPSã€å»¶è¿Ÿç­‰æ–¹é¢ã€‚1.æˆ‘ä»¬å¯ç”¨256Kå»æµ‹è¯•å¸¦å®½çš„æé™é€Ÿåº¦ã€‚\n4Ké˜Ÿåˆ—æ·±åº¦32-éšæœºè¯»å†™æµ‹è¯•â€“512KB * 519 â‰ˆ 260 MiB&#x2F;s\n\n\næŒ‡æ ‡\nç»“æœ\n\n\n\nå¹³å‡å†™å…¥é€Ÿåº¦\n260 MiB&#x2F;s (273 MB&#x2F;s) #ç£ç›˜çš„é¡ºåºå†™å…¥æé™é€Ÿåº¦\n\n\nå¹³å‡IOPS\n520\n\n\nå¹³å‡å»¶è¿Ÿ\n61.4æ¯«ç§’\n\n\nç£ç›˜åˆ©ç”¨ç‡\n100%\n\n\nfio --ioengine=libaio  --direct=1 --rw=write --time_based --refill_buffers --norandommap  --randrepeat=0 --group_reporting --name=fio-randwrite --size=1000G  --filename=/dev/vdb --iodepth=32 --bs=512kfio: time_based requires a runtime/timeout settingfio-randwrite: (g=0): rw=write, bs=(R) 512KiB-512KiB, (W) 512KiB-512KiB, (T) 512KiB-512KiB, ioengine=libaio, iodepth=32fio-3.7Starting 1 process#è¡¨ç¤ºæœ‰1ä¸ªI/Oä½œä¸šæ­£åœ¨è¿è¡Œã€‚å†™å…¥æ“ä½œå®Œæˆäº†100%å†™å…¥é€Ÿåº¦ä¸º260Mib/s ,è®¡ç®—ï¼š512KB * 520 â‰ˆ 260 MiB/sï¼‰Jobs: 1 (f=1): [W(1)][100.0%][r=0KiB/s,w=260MiB/s][r=0,w=520 IOPS][eta 00m:00s]  #- æµ‹è¯•åç§°ï¼Œç»„IDï¼Œä»»åŠ¡æ•°ï¼Œé”™è¯¯æ•°ï¼Œè¿›ç¨‹IDå’Œæ—¶é—´ã€‚fio-randwrite: (groupid=0, jobs=1): err= 0: pid=8750: Sun Sep 14 14:56:44 2025#- å†™å…¥æµ‹è¯•ç»“æœï¼šIOPSä¸º520ï¼Œå¸¦å®½ä¸º260MiB/sï¼ˆ273MB/sï¼‰ï¼Œæ€»å…±å†™å…¥1000GiBï¼Œç”¨æ—¶3937369æ¯«ç§’ï¼ˆçº¦3937.369ç§’ï¼Œå³65.6åˆ†é’Ÿï¼‰  write: IOPS=520, BW=260MiB/s (273MB/s)(1000GiB/3937369msec)#    slat (usec): min=12, max=143, avg=46.17, stdev=11.34 #æäº¤å»¶è¿Ÿï¼ˆä»æäº¤I/Oåˆ°å†…æ ¸åˆ°å†…æ ¸å¼€å§‹å¤„ç†çš„æ—¶é—´ï¼‰å¾®ç§’çº§ï¼Œæœ€å°12ï¼Œæœ€å¤§143ï¼Œå¹³å‡46.17ï¼Œæ ‡å‡†å·®11.34ã€‚    clat (msec): min=6, max=745, avg=61.37, stdev= 2.86 #å®Œæˆå»¶è¿Ÿï¼ˆä»å†…æ ¸å¼€å§‹å¤„ç†åˆ°å®Œæˆçš„æ—¶é—´ï¼‰æ¯«ç§’çº§ï¼Œæœ€å°6ï¼Œæœ€å¤§745ï¼Œå¹³å‡61.37ï¼Œæ ‡å‡†å·®2.86ã€‚     lat (msec): min=6, max=745, avg=61.42, stdev= 2.86 # æ€»å»¶è¿Ÿï¼ˆslat + clatï¼‰ï¼Œå¹³å‡61.42æ¯«ç§’ã€‚    clat percentiles (msec): #å®Œæˆå»¶è¿Ÿçš„ç™¾åˆ†ä½æ•°ï¼ˆå•ä½æ¯«ç§’ï¼‰ï¼Œå¯ä»¥çœ‹å‡ºç»å¤§å¤šæ•°è¯·æ±‚çš„å»¶è¿Ÿåœ¨59åˆ°66æ¯«ç§’ä¹‹é—´ï¼Œåªæœ‰ä¸€ä¸ªå¼‚å¸¸å€¼åˆ°äº†176æ¯«ç§’ï¼ˆ99.99%å¤„ï¼‰ã€‚     |  1.00th=[   59],  5.00th=[   61], 10.00th=[   61], 20.00th=[   62],     | 30.00th=[   62], 40.00th=[   62], 50.00th=[   62], 60.00th=[   62],     | 70.00th=[   62], 80.00th=[   63], 90.00th=[   63], 95.00th=[   63],     | 99.00th=[   63], 99.50th=[   64], 99.90th=[   65], 99.95th=[   66],     | 99.99th=[  176]   #  å¸¦å®½ï¼ˆbwï¼‰å’ŒIOPSï¼ˆiopsï¼‰çš„ç»Ÿè®¡ï¼šæä¾›äº†æœ€å°å€¼ã€æœ€å¤§å€¼ã€å¹³å‡å€¼å’Œæ ‡å‡†å·®ï¼Œä»¥åŠé‡‡æ ·æ•°ã€‚   bw (  KiB/s): min=263168, max=797696, per=100.00%, avg=266307.92, stdev=6013.18, samples=7874   iops        : min=  514, max= 1558, avg=520.12, stdev=11.75, samples=7874  #å»¶è¿Ÿåˆ†å¸ƒï¼š  lat (msec)   : 10=0.01%, 20=0.03%, 50=0.01%, 100=99.94%, 250=0.02% #è¡¨ç¤º99.94%çš„è¯·æ±‚å»¶è¿Ÿåœ¨100æ¯«ç§’ä»¥å†…ã€‚  lat (msec)   : 500=0.01%, 750=0.01%  #CPUä½¿ç”¨æƒ…å†µï¼šusr=5.69%, sys=2.50%, ctx=2042604 (ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°), majf=0 (ä¸»è¦ç¼ºé¡µä¸­æ–­), minf=31 (æ¬¡è¦ç¼ºé¡µä¸­æ–­)  cpu          : usr=5.69%, sys=2.50%, ctx=2042604, majf=0, minf=31  #IOæ·±åº¦åˆ†å¸ƒï¼šå‡ ä¹100%çš„æ—¶é—´é˜Ÿåˆ—æ·±åº¦éƒ½åœ¨32ï¼ˆå³æˆ‘ä»¬è®¾ç½®çš„iodepthï¼‰ã€‚  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=0.1%, 32=100.0%, &gt;=64=0.0%     #æäº¤å’Œå®Œæˆæƒ…å†µï¼šå¤§éƒ¨åˆ†æäº¤æ˜¯4ä¸ªä¸€æ‰¹ï¼ˆ4=100.0%ï¼‰ï¼Œå®Œæˆä¹Ÿæ˜¯4ä¸ªä¸€æ‰¹ï¼ˆ4=100.0%ï¼‰ï¼Œä½†å®Œæˆæ—¶32ä¸ªä¸€æ‰¹çš„å 0.1%ã€‚     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%     #å‘å‡ºçš„è¯»å†™å‘½ä»¤æ€»æ•°ï¼štotal=0ï¼ˆè¯»ï¼‰,2048000ï¼ˆå†™ï¼‰,0ï¼ˆå…¶ä»–ï¼‰,0ï¼ˆå…¶ä»–ï¼‰     issued rwts: total=0,2048000,0,0 short=0,0,0,0 dropped=0,0,0,0     latency   : target=0, window=0, percentile=100.00%, depth=32#æ€»ç»“ï¼šé¡ºåºå†™å…¥1000GiBæ•°æ®ï¼Œç”¨æ—¶çº¦65.6åˆ†é’Ÿï¼Œå¹³å‡å†™å…¥é€Ÿåº¦260MiB/sï¼ˆçº¦273MB/sï¼‰ï¼Œå¹³å‡IOPSä¸º520ã€‚ç£ç›˜åˆ©ç”¨ç‡ï¼ˆutilï¼‰è¾¾åˆ°100%ï¼Œè¯´æ˜ç£ç›˜ä¸€ç›´è¢«å ç”¨ã€‚Run status group 0 (all jobs):  WRITE: bw=260MiB/s (273MB/s), 260MiB/s-260MiB/s (273MB/s-273MB/s), io=1000GiB (1074GB), run=3937369-3937369msecDisk stats (read/write):  vdb: ios=41/4095920, merge=0/0, ticks=14/251312457, in_queue=251311675, util=100.00%\n\n4Kéšæœºå†™ï¼š\n\n\næŒ‡æ ‡\nç»“æœ\n\n\n\nå¹³å‡IOPS\n26,000\n\n\nå¹³å‡ååé‡\n102 MiB&#x2F;s\n\n\nå¹³å‡å»¶è¿Ÿ\n1.22æ¯«ç§’\n\n\nç£ç›˜åˆ©ç”¨ç‡\n100%\n\n\nfio --ioengine=libaio --direct=1 --rw=randwrite  --time_based --refill_buffers --norandommap --randrepeat=0 --group_reporting  --name=fio-randwrite --size=300G --filename=/dev/vdb --iodepth=32 --runtime=600  --bs=4kfio-randwrite: (g=0): rw=randwrite, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=32fio-3.7Starting 1 processJobs: 1 (f=1): [w(1)][100.0%][r=0KiB/s,w=102MiB/s][r=0,w=26.0k IOPS][eta 00m:00s]fio-randwrite: (groupid=0, jobs=1): err= 0: pid=11639: Sun Sep 14 15:24:29 2025  write: IOPS=26.0k, BW=102MiB/s (107MB/s)(59.6GiB/600208msec) #26,000 IOPS é«˜æ€§èƒ½SSDæˆ–NVMeç¡¬ç›˜ï¼ŒIOPSèŒƒå›´: 25,896 - 55,142 (æœ€ä½-æœ€é«˜)    slat (nsec): min=1824, max=137699, avg=3761.17, stdev=1377.41    clat (usec): min=285, max=208738, avg=1224.16, stdev=457.16 #å¹³å‡å»¶è¿Ÿ: 1.22æ¯«ç§’ (1224å¾®ç§’)     lat (usec): min=290, max=208741, avg=1228.19, stdev=457.15    clat percentiles (usec): #å»¶è¿Ÿè¡¨ç° (Latency),     |  1.00th=[  611],  5.00th=[  947], 10.00th=[  979], 20.00th=[ 1004],     | 30.00th=[ 1029], 40.00th=[ 1057], 50.00th=[ 1074], 60.00th=[ 1106], #50%çš„è¯·æ±‚åœ¨1.07æ¯«ç§’å†…å®Œæˆ     | 70.00th=[ 1172], 80.00th=[ 1713], 90.00th=[ 1778], 95.00th=[ 1827], #95%çš„è¯·æ±‚åœ¨1.83æ¯«ç§’å†…å®Œæˆ     | 99.00th=[ 1975], 99.50th=[ 2024], 99.90th=[ 4424], 99.95th=[ 4621], #99%çš„è¯·æ±‚åœ¨1.98æ¯«ç§’å†…å®Œæˆ     | 99.99th=[ 5407]#æå°‘æ•°è¯·æ±‚(0.01%)å»¶è¿Ÿè¾ƒé«˜(5.4æ¯«ç§’)ï¼Œè¿™å±äºæ­£å¸¸æ³¢åŠ¨   bw (  KiB/s): min=103584, max=220568, per=100.00%, avg=104105.78, stdev=3424.83, samples=1200   iops        : min=25896, max=55142, avg=26026.45, stdev=856.21, samples=1200  lat (usec)   : 500=0.41%, 750=0.82%, 1000=15.98%  lat (msec)   : 2=82.14%, 4=0.49%, 10=0.16%, 250=0.01% #æ€»å»¶è¿Ÿï¼ˆslat + clatï¼‰  cpu          : usr=5.52%, sys=15.09%, ctx=3406080, majf=0, minf=32 # ç”¨æˆ·ç©ºé—´5.52%ï¼Œå†…æ ¸ç©ºé—´15.09%ï¼Œè¯´æ˜æ¶ˆè€—çš„æ˜¯I/Oèµ„æºï¼ŒCPUä¸æ˜¯ç“¶é¢ˆ  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=0.1%, 32=100.0%, &gt;=64=0.0%     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%     issued rwts: total=0,15616422,0,0 short=0,0,0,0 dropped=0,0,0,0     latency   : target=0, window=0, percentile=100.00%, depth=32Run status group 0 (all jobs):  WRITE: bw=102MiB/s (107MB/s), 102MiB/s-102MiB/s (107MB/s-107MB/s), io=59.6GiB (63.0GB), run=600208-600208msecDisk stats (read/write):  vdb: ios=41/15616420, merge=0/0, ticks=21/18778520, in_queue=18777870, util=100.00%\n\n4Kéšæœºè¯»\n\n\næŒ‡æ ‡\nç»“æœä¸å•ä½\n\n\n\nIOPS\n26,000\n\n\nå¸¦å®½ (BW)\n102 MiB&#x2F;s\n\n\nå¹³å‡å»¶è¿Ÿ (clat)\n1224.46 Î¼s (çº¦ 1.22 ms)\n\n\nç£ç›˜åˆ©ç”¨ç‡ (util)\n100.00%\n\n\nfio --ioengine=libaio --direct=1 --rw=randread  --time_based --refill_buffers --norandommap --randrepeat=0 --group_reporting  --name=fio-randwrite --size=300G --filename=/dev/vdb --iodepth=32  --runtime=600 --bs=4kfio-randwrite: (g=0): rw=randread, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=32fio-3.7Starting 1 processJobs: 1 (f=1): [r(1)][100.0%][r=101MiB/s,w=0KiB/s][r=25.0k,w=0 IOPS][eta 00m:00s]fio-randwrite: (groupid=0, jobs=1): err= 0: pid=12202: Sun Sep 14 15:40:35 2025   read: IOPS=26.0k, BW=102MiB/s (107MB/s)(59.6GiB/600002msec) # IOPSä¸å¸¦å®½    slat (nsec): min=1795, max=147725, avg=3537.09, stdev=1508.45    clat (usec): min=151, max=7033, avg=1224.46, stdev=376.93 #å¹³å‡å»¶è¿Ÿ     lat (usec): min=155, max=7036, avg=1228.29, stdev=376.97    clat percentiles (usec):     |  1.00th=[  627],  5.00th=[  873], 10.00th=[  938], 20.00th=[  988],     | 30.00th=[ 1012], 40.00th=[ 1045], 50.00th=[ 1074], 60.00th=[ 1106],     | 70.00th=[ 1188], 80.00th=[ 1680], 90.00th=[ 1860], 95.00th=[ 1926],     | 99.00th=[ 2008], 99.50th=[ 2040], 99.90th=[ 4047], 99.95th=[ 4359],     | 99.99th=[ 5145]   bw (  KiB/s): min=103584, max=200688, per=100.00%, avg=104131.86, stdev=3493.97, samples=1200   iops        : min=25896, max=50174, avg=26032.97, stdev=873.54, samples=1200  lat (usec)   : 250=0.01%, 500=0.48%, 750=2.11%, 1000=21.93%  lat (msec)   : 2=74.42%, 4=0.95%, 10=0.11%  cpu          : usr=3.01%, sys=14.54%, ctx=3004183, majf=0, minf=67  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=0.1%, 32=100.0%, &gt;=64=0.0%     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%     issued rwts: total=15620286,0,0,0 short=0,0,0,0 dropped=0,0,0,0     latency   : target=0, window=0, percentile=100.00%, depth=32Run status group 0 (all jobs):   READ: bw=102MiB/s (107MB/s), 102MiB/s-102MiB/s (107MB/s-107MB/s), io=59.6GiB (63.0GB), run=600002-600002msecDisk stats (read/write):  vdb: ios=15617264/0, merge=0/0, ticks=18811938/0, in_queue=18810717, util=100.00%\n\n4kéšæœº7:3æ··åˆè¯»å†™\n\n\næŒ‡æ ‡\nè¯»å–æ€§èƒ½\nå†™å…¥æ€§èƒ½\nè¯„ä»·\n\n\n\nIOPS\n26,000\n11,100\næå…¶å‡ºè‰²\n\n\nååé‡(BW)\n102 MiB&#x2F;s\n43.6 MiB&#x2F;s\nä¸4Kå—å¤§å°åŒ¹é…\n\n\nå¹³å‡å»¶è¿Ÿ(Clat)\n0.99ms\n0.54ms\nè¶…ä½å»¶è¿Ÿ\n\n\nç£ç›˜åˆ©ç”¨ç‡\n100%\n100%\nç£ç›˜å®Œå…¨é¥±å’Œ\n\n\n#å¯¹ç£ç›˜/dev/vdb è¿›è¡Œäº† 10åˆ†é’Ÿ(600ç§’)çš„4Kéšæœºæ··åˆè¯»å†™æµ‹è¯•ï¼Œè¯»å†™æ¯”ä¾‹ä¸º70%è¯»/30%å†™ï¼Œä½¿ç”¨æ·±åº¦é˜Ÿåˆ—(32)ã€‚fio --ioengine=libaio --direct=1 --rw=randrw  --rwmixread=70 --time_based --refill_buffers --norandommap --randrepeat=0 --group_reporting  --name=fio-randwrite --size=300G --filename=/dev/vdb --iodepth=32  --runtime=600 --bs=4k fio-randwrite: (g=0): rw=randrw, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=32fio-3.7Starting 1 processJobs: 1 (f=1): [m(1)][100.0%][r=102MiB/s,w=43.8MiB/s][r=26.0k,w=11.2k IOPS][eta 00m:00s]fio-randwrite: (groupid=0, jobs=1): err= 0: pid=12672: Sun Sep 14 15:54:10 2025   read: IOPS=26.0k, BW=102MiB/s (107MB/s)(59.6GiB/600003msec)    slat (nsec): min=1788, max=122280, avg=3695.80, stdev=1473.14    clat (usec): min=158, max=9285, avg=991.89, stdev=252.50     lat (usec): min=164, max=9289, avg=995.86, stdev=252.49    clat percentiles (usec):     |  1.00th=[  433],  5.00th=[  553], 10.00th=[  693], 20.00th=[  848],     | 30.00th=[  914], 40.00th=[  963], 50.00th=[  996], 60.00th=[ 1029],     | 70.00th=[ 1057], 80.00th=[ 1123], 90.00th=[ 1254], 95.00th=[ 1369],     | 99.00th=[ 1647], 99.50th=[ 1778], 99.90th=[ 3720], 99.95th=[ 4113],     | 99.99th=[ 4555]   bw (  KiB/s): min=103632, max=148232, per=100.00%, avg=104091.25, stdev=1882.41, samples=1200   iops        : min=25908, max=37058, avg=26022.83, stdev=470.60, samples=1200  write: IOPS=11.1k, BW=43.6MiB/s (45.7MB/s)(25.5GiB/600003msec)    slat (nsec): min=1844, max=74649, avg=3878.58, stdev=1460.63    clat (usec): min=271, max=9216, avg=537.67, stdev=156.54     lat (usec): min=276, max=9220, avg=541.82, stdev=156.57    clat percentiles (usec):     |  1.00th=[  355],  5.00th=[  392], 10.00th=[  412], 20.00th=[  441],     | 30.00th=[  465], 40.00th=[  494], 50.00th=[  529], 60.00th=[  553],     | 70.00th=[  586], 80.00th=[  619], 90.00th=[  668], 95.00th=[  717],     | 99.00th=[  832], 99.50th=[  922], 99.90th=[ 3458], 99.95th=[ 4015],     | 99.99th=[ 4228]   bw (  KiB/s): min=42416, max=63880, per=100.00%, avg=44596.01, stdev=1121.21, samples=1200   iops        : min=10604, max=15970, avg=11148.99, stdev=280.30, samples=1200  lat (usec)   : 250=0.01%, 500=14.86%, 750=23.18%, 1000=28.56%  lat (msec)   : 2=33.25%, 4=0.09%, 10=0.06%  cpu          : usr=5.69%, sys=22.40%, ctx=4720003, majf=0, minf=34  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=0.1%, 32=100.0%, &gt;=64=0.0%     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%     issued rwts: total=15614245,6689629,0,0 short=0,0,0,0 dropped=0,0,0,0     latency   : target=0, window=0, percentile=100.00%, depth=32Run status group 0 (all jobs):   READ: bw=102MiB/s (107MB/s), 102MiB/s-102MiB/s (107MB/s-107MB/s), io=59.6GiB (63.0GB), run=600003-600003msec  WRITE: bw=43.6MiB/s (45.7MB/s), 43.6MiB/s-43.6MiB/s (45.7MB/s-45.7MB/s), io=25.5GiB (27.4GB), run=600003-600003msecDisk stats (read/write):  vdb: ios=15611269/6688288, merge=0/0, ticks=15107080/3522581, in_queue=18628447, util=100.00%\n\nå‘½ä»¤è¡Œè§£é‡Šï¼š\n\n\nå‚æ•°\nå«ä¹‰\nç›¸å½“äº\n\n\n\n--rw=read/write/randread/randwrite\næµ‹ä»€ä¹ˆï¼Ÿ (è¯»&#x2F;å†™&#x2F;éšæœºè¯»&#x2F;éšæœºå†™)\næµ‹è¯•ç±»å‹\n\n\n--bs=4k/1M\næ¯æ¬¡è¿å¤šå°‘ï¼Ÿ (å°åŒ…&#x3D;æµ‹IOPSï¼Œå¤§åŒ…&#x3D;æµ‹å¸¦å®½)\nå—å¤§å°\n\n\n--iodepth=1/32\næ´¾å¤šå°‘è¾†è½¦åŒæ—¶è¿ï¼Ÿ (1&#x3D;æµ‹å»¶è¿Ÿï¼Œ32&#x3D;æµ‹å³°å€¼)\né˜Ÿåˆ—æ·±åº¦\n\n\nå¸¸ç”¨ç»„åˆï¼š\n\næµ‹å»¶è¿Ÿå’ŒIOPSï¼šbs=4k, iodepth=1 (å¿«é€’å‘˜ä¸€æ¬¡é€ä¸€ä¸ªå°ä»¶)\næµ‹æœ€å¤§ååå¸¦å®½ï¼šbs=1M, iodepth=32 (ç”¨å¤§å¡è½¦è½¦é˜Ÿæ‹‰è´§)\næµ‹æœ€å¤§IOPSï¼šbs=4k, iodepth=32 (ç”¨æ‘©æ‰˜è½¦è½¦é˜Ÿé€å°ä»¶)\n\n256Ké¡ºåºå†™fio --ioengine=libaio --direct=1 --rw=write  --time_based --refill_buffers --norandommap --randrepeat=0 --group_reporting  --name=fio-randwrite --size=300G --filename=/dev/vdb --iodepth=32 --runtime=600  --bs=256kfio-randwrite: (g=0): rw=write, bs=(R) 256KiB-256KiB, (W) 256KiB-256KiB, (T) 256KiB-256KiB, ioengine=libaio, iodepth=32fio-3.7Starting 1 processJobs: 1 (f=1): [W(1)][100.0%][r=0KiB/s,w=260MiB/s][r=0,w=1040 IOPS][eta 00m:00s]fio-randwrite: (groupid=0, jobs=1): err= 0: pid=14539: Sun Sep 14 16:43:06 2025  write: IOPS=1041, BW=260MiB/s (273MB/s)(153GiB/600031msec)    slat (nsec): min=6675, max=83106, avg=23107.73, stdev=7365.32    clat (msec): min=2, max=666, avg=30.64, stdev= 1.54     lat (msec): min=2, max=666, avg=30.66, stdev= 1.54    clat percentiles (usec):     |  1.00th=[29230],  5.00th=[29754], 10.00th=[30016], 20.00th=[30278],     | 30.00th=[30540], 40.00th=[30802], 50.00th=[30802], 60.00th=[30802],     | 70.00th=[31065], 80.00th=[31065], 90.00th=[31065], 95.00th=[31327],     | 99.00th=[31851], 99.50th=[33424], 99.90th=[34866], 99.95th=[34866],     | 99.99th=[35390]   bw (  KiB/s): min=264704, max=797696, per=100.00%, avg=266675.22, stdev=15345.76, samples=1200   iops        : min= 1034, max= 3116, avg=1041.68, stdev=59.95, samples=1200  lat (msec)   : 4=0.05%, 10=0.14%, 20=0.01%, 50=99.80%, 100=0.01%  lat (msec)   : 750=0.01%  cpu          : usr=6.04%, sys=2.70%, ctx=606905, majf=0, minf=31  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=0.1%, 32=100.0%, &gt;=64=0.0%     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%     issued rwts: total=0,625077,0,0 short=0,0,0,0 dropped=0,0,0,0     latency   : target=0, window=0, percentile=100.00%, depth=32Run status group 0 (all jobs):  WRITE: bw=260MiB/s (273MB/s), 260MiB/s-260MiB/s (273MB/s-273MB/s), io=153GiB (164GB), run=600031-600031msecDisk stats (read/write):  vdb: ios=40/624916, merge=0/0, ticks=21/19139965, in_queue=19140388, util=100.00%\n\n256Ké¡ºåºè¯»fio --ioengine=libaio --direct=1 --rw=read  --time_based --refill_buffers --norandommap --randrepeat=0 --group_reporting --name=fio-test --size=300G --filename=/dev/vdb --iodepth=32 --runtime=600 --bs=256kfio-test: (g=0): rw=read, bs=(R) 256KiB-256KiB, (W) 256KiB-256KiB, (T) 256KiB-256KiB, ioengine=libaio, iodepth=32fio-3.7Starting 1 processJobs: 1 (f=1): [R(1)][100.0%][r=260MiB/s,w=0KiB/s][r=1040,w=0 IOPS][eta 00m:00s]fio-test: (groupid=0, jobs=1): err= 0: pid=14943: Sun Sep 14 16:55:03 2025   read: IOPS=1041, BW=260MiB/s (273MB/s)(153GiB/600031msec)    slat (usec): min=9, max=1467, avg=23.27, stdev= 6.28    clat (usec): min=2138, max=59974, avg=30693.36, stdev=1249.32     lat (usec): min=2150, max=60002, avg=30716.91, stdev=1249.24    clat percentiles (usec):     |  1.00th=[29492],  5.00th=[29754], 10.00th=[30016], 20.00th=[30278],     | 30.00th=[30802], 40.00th=[30802], 50.00th=[30802], 60.00th=[31065],     | 70.00th=[31065], 80.00th=[31065], 90.00th=[31065], 95.00th=[31327],     | 99.00th=[31589], 99.50th=[33162], 99.90th=[34866], 99.95th=[35390],     | 99.99th=[35914]   bw (  KiB/s): min=264704, max=797696, per=100.00%, avg=266673.60, stdev=15345.36, samples=1200   iops        : min= 1034, max= 3116, avg=1041.68, stdev=59.94, samples=1200  lat (msec)   : 4=0.02%, 10=0.18%, 20=0.03%, 50=99.78%, 100=0.01%  cpu          : usr=0.19%, sys=2.98%, ctx=624157, majf=0, minf=548  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=0.1%, 32=100.0%, &gt;=64=0.0%     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%     issued rwts: total=625069,0,0,0 short=0,0,0,0 dropped=0,0,0,0     latency   : target=0, window=0, percentile=100.00%, depth=32Run status group 0 (all jobs):   READ: bw=260MiB/s (273MB/s), 260MiB/s-260MiB/s (273MB/s-273MB/s), io=153GiB (164GB), run=600031-600031msecDisk stats (read/write):  vdb: ios=624912/0, merge=0/0, ticks=19178741/0, in_queue=19179226, util=100.00%\n\n256Ké¡ºåº7:3æ··åˆè¯»å†™ fio --ioengine=libaio --direct=1 --rw=rw  --rwmixread=70 --time_based --refill_buffers --norandommap --randrepeat=0 --group_reporting  --name=fio-randwrite --size=300G --filename=/dev/vdb --iodepth=32  --runtime=600 --bs=256kfio-randwrite: (g=0): rw=rw, bs=(R) 256KiB-256KiB, (W) 256KiB-256KiB, (T) 256KiB-256KiB, ioengine=libaio, iodepth=32fio-3.7Starting 1 processJobs: 1 (f=1): [M(1)][100.0%][r=260MiB/s,w=116MiB/s][r=1041,w=462 IOPS][eta 00m:00s]fio-randwrite: (groupid=0, jobs=1): err= 0: pid=15542: Sun Sep 14 17:12:24 2025   read: IOPS=1041, BW=260MiB/s (273MB/s)(153GiB/600031msec)    slat (usec): min=9, max=224, avg=23.66, stdev= 6.05    clat (usec): min=1389, max=74402, avg=30065.00, stdev=1577.33     lat (usec): min=1416, max=74416, avg=30088.95, stdev=1577.27    clat percentiles (usec):     |  1.00th=[27395],  5.00th=[28705], 10.00th=[28967], 20.00th=[29492],     | 30.00th=[29754], 40.00th=[30016], 50.00th=[30016], 60.00th=[30540],     | 70.00th=[30802], 80.00th=[31065], 90.00th=[31065], 95.00th=[31327],     | 99.00th=[31589], 99.50th=[32375], 99.90th=[34341], 99.95th=[34866],     | 99.99th=[57410]   bw (  KiB/s): min=264704, max=660992, per=100.00%, avg=266711.21, stdev=12484.86, samples=1200   iops        : min= 1034, max= 2582, avg=1041.83, stdev=48.77, samples=1200  write: IOPS=447, BW=112MiB/s (117MB/s)(65.5GiB/600031msec)    slat (usec): min=6, max=198, avg=23.32, stdev= 7.29    clat (usec): min=792, max=167378, avg=1376.91, stdev=636.48     lat (usec): min=803, max=167388, avg=1400.52, stdev=636.57    clat percentiles (usec):     |  1.00th=[  996],  5.00th=[ 1057], 10.00th=[ 1106], 20.00th=[ 1139],     | 30.00th=[ 1172], 40.00th=[ 1205], 50.00th=[ 1254], 60.00th=[ 1303],     | 70.00th=[ 1418], 80.00th=[ 1582], 90.00th=[ 1762], 95.00th=[ 1893],     | 99.00th=[ 2343], 99.50th=[ 4359], 99.90th=[ 8586], 99.95th=[10028],     | 99.99th=[13698]   bw (  KiB/s): min=87040, max=307200, per=100.00%, avg=114523.47, stdev=10872.32, samples=1200   iops        : min=  340, max= 1200, avg=447.35, stdev=42.47, samples=1200  lat (usec)   : 1000=0.34%  lat (msec)   : 2=28.80%, 4=0.75%, 10=0.31%, 20=0.07%, 50=69.73%  lat (msec)   : 100=0.01%, 250=0.01%  cpu          : usr=2.79%, sys=4.21%, ctx=797662, majf=0, minf=33  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=0.1%, 32=100.0%, &gt;=64=0.0%     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%     issued rwts: total=625152,268421,0,0 short=0,0,0,0 dropped=0,0,0,0     latency   : target=0, window=0, percentile=100.00%, depth=32Run status group 0 (all jobs):   READ: bw=260MiB/s (273MB/s), 260MiB/s-260MiB/s (273MB/s-273MB/s), io=153GiB (164GB), run=600031-600031msec  WRITE: bw=112MiB/s (117MB/s), 112MiB/s-112MiB/s (117MB/s-117MB/s), io=65.5GiB (70.4GB), run=600031-600031msecDisk stats (read/write):  vdb: ios=625031/268369, merge=0/0, ticks=18779993/364832, in_queue=19145288, util=100.00%\n\nå¤šå—ç›˜4Kéšæœºå†™ï¼š\n\n\næŒ‡æ ‡\nç»“æœ\n\n\n\n\nèšåˆIOPS\n52,500\næ˜¯5å—ç£ç›˜çš„èšåˆæ€§èƒ½ï¼Œå¹³å‡æ¯å—ç£ç›˜çº¦10,500 IOPS,ä¸ä¹‹å‰å•ç›˜æµ‹è¯•çš„26,000 IOPSç›¸æ¯”ï¼Œ5ç›˜å¹¶è¡Œè¾¾åˆ°äº†52,500 IOPSï¼Œæ€§èƒ½æå‡çº¦2å€(ä¸æ˜¯5å€)ï¼Œè¿™è¡¨æ˜å¯èƒ½å­˜åœ¨ä¸€äº›å…±äº«èµ„æºç“¶é¢ˆ(å¦‚PCIeé€šé“æˆ–å­˜å‚¨æ§åˆ¶å™¨)ï¼Œä½†æ•´ä½“æ‰©å±•æ€§ä»ç„¶è‰¯å¥½ã€‚\n\n\nèšåˆå¸¦å®½\n205 MiB&#x2F;s (215 MB&#x2F;s)\n\n\n\nå¹³å‡å»¶è¿Ÿ\n0.60ms\nå¹³å‡ä»…0.60msï¼Œ99%çš„è¯·æ±‚åœ¨0.89mså†…å®Œæˆ\n\n\nç£ç›˜æ•°é‡\n5å—\n\n\n\næµ‹è¯•æ—¶é•¿\n600ç§’(10åˆ†é’Ÿ)\n\n\n\n[root@VM_172_180_centos ~]# cat 4k fio --ioengine=libaio --direct=1 --rw=randwrite --time_based --refill_buffers --norandommap --randrepeat=0 --group_reporting  --name=fio-randwrite --size=300G --filename=/dev/vdb:/dev/vdc:/dev/vdd:/dev/vde:/dev/vdf --iodepth=32 --runtime=600  --bs=4kfio --ioengine=libaio --direct=1 --rw=randread --time_based --refill_buffers --norandommap --randrepeat=0 --group_reporting  --name=fio-randwrite --size=300G --filename=/dev/vdb:/dev/vdc:/dev/vdd:/dev/vde:/dev/vdf --iodepth=32 --runtime=600  --bs=4kfio --ioengine=libaio --direct=1 --rw=randrw  --rwmixread=70 --time_based --refill_buffers --norandommap --randrepeat=0 --group_reporting  --name=fio-randwrite --size=300G --filename=/dev/vdb:/dev/vdc:/dev/vdd:/dev/vde:/dev/vdf --iodepth=32  --runtime=600 --bs=4k [root@VM_172_180_centos ~]# sh 4k fio-randwrite: (g=0): rw=randwrite, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=32fio-3.7Starting 1 processJobs: 1 (f=5): [w(1)][100.0%][r=0KiB/s,w=201MiB/s][r=0,w=51.3k IOPS][eta 00m:00s]fio-randwrite: (groupid=0, jobs=1): err= 0: pid=16421: Sun Sep 14 17:33:42 2025  write: IOPS=52.5k, BW=205MiB/s (215MB/s)(120GiB/600001msec)    slat (usec): min=2, max=189, avg= 5.40, stdev= 1.58    clat (usec): min=283, max=6328, avg=601.34, stdev=145.28     lat (usec): min=287, max=6334, avg=607.05, stdev=145.25    clat percentiles (usec):     |  1.00th=[  437],  5.00th=[  474], 10.00th=[  494], 20.00th=[  523],     | 30.00th=[  545], 40.00th=[  562], 50.00th=[  586], 60.00th=[  611],     | 70.00th=[  635], 80.00th=[  668], 90.00th=[  717], 95.00th=[  766],     | 99.00th=[  889], 99.50th=[  971], 99.90th=[ 1500], 99.95th=[ 4113],     | 99.99th=[ 4817]   bw (  KiB/s): min=183928, max=234600, per=99.99%, avg=210177.37, stdev=6712.20, samples=1199   iops        : min=45982, max=58650, avg=52544.35, stdev=1678.06, samples=1199  lat (usec)   : 500=12.15%, 750=81.70%, 1000=5.74%  lat (msec)   : 2=0.33%, 4=0.03%, 10=0.07%  #ç”¨æˆ·ç©ºé—´10.90%ï¼Œå†…æ ¸ç©ºé—´38.92%,å†…æ ¸CPUä½¿ç”¨ç‡è¾ƒé«˜æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºéœ€è¦å¤„ç†å¤§é‡I/Oè¯·æ±‚ï¼Œä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°è¾ƒå¤š(641ä¸‡æ¬¡)ï¼Œè¿™æ˜¯å¤šç£ç›˜å¹¶è¡Œæ“ä½œçš„ç‰¹ç‚¹  cpu          : usr=10.90%, sys=38.92%, ctx=6416674, majf=0, minf=42   IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=0.1%, 32=100.0%, &gt;=64=0.0%     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%     issued rwts: total=0,31528375,0,0 short=0,0,0,0 dropped=0,0,0,0     latency   : target=0, window=0, percentile=100.00%, depth=32Run status group 0 (all jobs):  WRITE: bw=205MiB/s (215MB/s), 205MiB/s-205MiB/s (215MB/s-215MB/s), io=120GiB (129GB), run=600001-600001msecDisk stats (read/write):  vdb: ios=41/6304332, merge=0/0, ticks=28/3689920, in_queue=3689073, util=100.00%  vdc: ios=41/6304332, merge=0/0, ticks=24/3703542, in_queue=3702711, util=100.00%  vdd: ios=40/6304332, merge=0/0, ticks=23/3706136, in_queue=3705460, util=100.00%  vde: ios=40/6304334, merge=0/0, ticks=25/3705165, in_queue=3704394, util=100.00%  vdf: ios=32/6304332, merge=0/0, ticks=21/3705596, in_queue=3704844, util=100.00%\n\n\n\nå¤šå—ç›˜4Kéšæœºè¯»ï¼šfio-randwrite: (g=0): rw=randread, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=32fio-3.7Starting 1 processJobs: 1 (f=5): [r(1)][100.0%][r=196MiB/s,w=0KiB/s][r=50.1k,w=0 IOPS][eta 00m:00s]fio-randwrite: (groupid=0, jobs=1): err= 0: pid=16818: Sun Sep 14 17:43:43 2025   read: IOPS=49.4k, BW=193MiB/s (202MB/s)(113GiB/600001msec)    slat (usec): min=2, max=100, avg= 5.49, stdev= 1.39    clat (usec): min=144, max=7269, avg=641.45, stdev=184.12     lat (usec): min=149, max=7274, avg=647.23, stdev=184.12    clat percentiles (usec):     |  1.00th=[  379],  5.00th=[  453], 10.00th=[  490], 20.00th=[  537],     | 30.00th=[  570], 40.00th=[  594], 50.00th=[  619], 60.00th=[  644],     | 70.00th=[  676], 80.00th=[  725], 90.00th=[  799], 95.00th=[  865],     | 99.00th=[ 1106], 99.50th=[ 1614], 99.90th=[ 3097], 99.95th=[ 3884],     | 99.99th=[ 4424]   bw (  KiB/s): min=131240, max=218152, per=99.99%, avg=197466.52, stdev=9655.55, samples=1200   iops        : min=32810, max=54538, avg=49366.64, stdev=2413.89, samples=1200  lat (usec)   : 250=0.03%, 500=11.92%, 750=72.06%, 1000=14.56%  lat (msec)   : 2=1.27%, 4=0.13%, 10=0.04%  cpu          : usr=5.70%, sys=37.43%, ctx=5033016, majf=0, minf=77  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=0.1%, 32=100.0%, &gt;=64=0.0%     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%     issued rwts: total=29622379,0,0,0 short=0,0,0,0 dropped=0,0,0,0     latency   : target=0, window=0, percentile=100.00%, depth=32Run status group 0 (all jobs):   READ: bw=193MiB/s (202MB/s), 193MiB/s-193MiB/s (202MB/s-202MB/s), io=113GiB (121GB), run=600001-600001msecDisk stats (read/write):  vdb: ios=5923231/0, merge=0/0, ticks=3671641/0, in_queue=3671080, util=100.00%  vdc: ios=5923233/0, merge=0/0, ticks=3751928/0, in_queue=3751240, util=100.00%  vdd: ios=5923231/0, merge=0/0, ticks=3752874/0, in_queue=3752289, util=100.00%  vde: ios=5923233/0, merge=0/0, ticks=3754781/0, in_queue=3754222, util=100.00%  vdf: ios=5923233/0, merge=0/0, ticks=3754502/0, in_queue=3754122, util=100.00%\n\n\n\nå¤šå—ç›˜4Kéšæœº7:3æ··å’Œè¯»å†™ï¼šfio-randwrite: (g=0): rw=randrw, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=libaio, iodepth=32fio-3.7Starting 1 processJobs: 1 (f=5): [m(1)][100.0%][r=141MiB/s,w=60.4MiB/s][r=36.2k,w=15.5k IOPS][eta 00m:00s]fio-randwrite: (groupid=0, jobs=1): err= 0: pid=17159: Sun Sep 14 17:53:43 2025   read: IOPS=35.7k, BW=139MiB/s (146MB/s)(81.7GiB/600001msec)    slat (nsec): min=1987, max=132833, avg=5552.38, stdev=1567.02    clat (usec): min=146, max=5624, avg=594.68, stdev=151.94     lat (usec): min=151, max=5629, avg=600.54, stdev=151.92    clat percentiles (usec):     |  1.00th=[  379],  5.00th=[  429], 10.00th=[  457], 20.00th=[  498],     | 30.00th=[  529], 40.00th=[  553], 50.00th=[  578], 60.00th=[  611],     | 70.00th=[  635], 80.00th=[  676], 90.00th=[  742], 95.00th=[  799],     | 99.00th=[  922], 99.50th=[  979], 99.90th=[ 1565], 99.95th=[ 3851],     | 99.99th=[ 4359]   bw (  KiB/s): min=122144, max=159920, per=99.99%, avg=142736.96, stdev=6141.07, samples=1199   iops        : min=30536, max=39980, avg=35684.24, stdev=1535.27, samples=1199  write: IOPS=15.3k, BW=59.8MiB/s (62.7MB/s)(35.0GiB/600001msec)    slat (nsec): min=2087, max=96123, avg=5655.39, stdev=1576.16    clat (usec): min=286, max=6765, avg=680.60, stdev=165.39     lat (usec): min=294, max=6770, avg=686.57, stdev=165.38    clat percentiles (usec):     |  1.00th=[  457],  5.00th=[  506], 10.00th=[  537], 20.00th=[  578],     | 30.00th=[  603], 40.00th=[  635], 50.00th=[  668], 60.00th=[  693],     | 70.00th=[  734], 80.00th=[  775], 90.00th=[  832], 95.00th=[  889],     | 99.00th=[ 1020], 99.50th=[ 1090], 99.90th=[ 3556], 99.95th=[ 4113],     | 99.99th=[ 4621]   bw (  KiB/s): min=52072, max=68832, per=99.99%, avg=61183.93, stdev=2677.88, samples=1199   iops        : min=13018, max=17208, avg=15295.97, stdev=669.45, samples=1199  lat (usec)   : 250=0.01%, 500=15.94%, 750=70.14%, 1000=13.27%  lat (msec)   : 2=0.55%, 4=0.06%, 10=0.04%  cpu          : usr=7.52%, sys=38.29%, ctx=4810743, majf=0, minf=44  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=0.1%, 32=100.0%, &gt;=64=0.0%     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%     issued rwts: total=21412293,9178326,0,0 short=0,0,0,0 dropped=0,0,0,0     latency   : target=0, window=0, percentile=100.00%, depth=32Run status group 0 (all jobs):   READ: bw=139MiB/s (146MB/s), 139MiB/s-139MiB/s (146MB/s-146MB/s), io=81.7GiB (87.7GB), run=600001-600001msec  WRITE: bw=59.8MiB/s (62.7MB/s), 59.8MiB/s-59.8MiB/s (62.7MB/s-62.7MB/s), io=35.0GiB (37.6GB), run=600001-600001msecDisk stats (read/write):  vdb: ios=4280455/1836455, merge=0/0, ticks=2488506/1221541, in_queue=3709393, util=100.00%  vdc: ios=4282591/1834319, merge=0/0, ticks=2490361/1223424, in_queue=3713056, util=100.00%  vdd: ios=4281157/1835753, merge=0/0, ticks=2488556/1226174, in_queue=3714052, util=100.00%  vde: ios=4282710/1834197, merge=0/0, ticks=2491021/1223394, in_queue=3713691, util=100.00%  vdf: ios=4281131/1835766, merge=0/0, ticks=2490609/1224589, in_queue=3714491, util=100.00%\n\nå¤šå—ç›˜256Ké¡ºåºå†™æ€§èƒ½æ¦‚è§ˆ\nèšåˆå¸¦å®½: 1302 MiB&#x2F;s (1365 MB&#x2F;s)\nèšåˆIOPS: 5208\nå¹³å‡å»¶è¿Ÿ: 6066.98å¾®ç§’ï¼ˆçº¦6æ¯«ç§’ï¼‰\næµ‹è¯•æ•°æ®é‡: 763 GiB\n\nfio --ioengine=libaio --direct=1 --rw=write --time_based --refill_buffers --norandommap --randrepeat=0 --group_reporting  --name=fio-randwrite --size=300G --filename=/dev/vdb:/dev/vdc:/dev/vdd:/dev/vde:/dev/vdf --iodepth=32 --runtime=600  --bs=256kfio-randwrite: (g=0): rw=write, bs=(R) 256KiB-256KiB, (W) 256KiB-256KiB, (T) 256KiB-256KiB, ioengine=libaio, iodepth=32fio-3.7Starting 1 processJobs: 1 (f=5): [W(1)][81.5%][r=0KiB/s,w=1301MiB/s][r=0,w=5204 IOPS][eta 01m:51s]Jobs: 1 (f=5): [W(1)][100.0%][r=0KiB/s,w=1300MiB/s][r=0,w=5200 IOPS][eta 00m:00s]fio-randwrite: (groupid=0, jobs=1): err= 0: pid=20208: Sun Sep 14 19:20:40 2025  write: IOPS=5208, BW=1302MiB/s (1365MB/s)(763GiB/600009msec)    slat (usec): min=8, max=211, avg=23.32, stdev= 7.45    clat (usec): min=1385, max=64973, avg=6066.98, stdev=1060.84     lat (usec): min=1412, max=64984, avg=6090.60, stdev=1060.63    clat percentiles (usec):     |  1.00th=[ 3785],  5.00th=[ 4490], 10.00th=[ 4817], 20.00th=[ 5211],     | 30.00th=[ 5473], 40.00th=[ 5800], 50.00th=[ 5932], 60.00th=[ 6128],     | 70.00th=[ 6587], 80.00th=[ 6980], 90.00th=[ 7570], 95.00th=[ 7898],     | 99.00th=[ 8586], 99.50th=[ 9110], 99.90th=[10552], 99.95th=[11076],     | 99.99th=[12125]   #å¸¦å®½æ³¢åŠ¨èŒƒå›´: 1,295-2,713 MiB/sï¼Œè¡¨ç°ç›¸å¯¹ç¨³å®š   bw (  MiB/s): min= 1295, max= 2713, per=99.99%, avg=1301.99, stdev=51.52, samples=1200   iops        : min= 5180, max=10852, avg=5207.92, stdev=206.07, samples=1200  lat (msec)   : 2=0.02%, 4=1.60%, 10=98.22%, 20=0.17%, 50=0.01%  lat (msec)   : 100=0.01%  cpu          : usr=28.61%, sys=13.14%, ctx=1262492, majf=0, minf=41  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=0.1%, 32=100.0%, &gt;=64=0.0%     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%     issued rwts: total=0,3125122,0,0 short=0,0,0,0 dropped=0,0,0,0     latency   : target=0, window=0, percentile=100.00%, depth=32Run status group 0 (all jobs):  WRITE: bw=1302MiB/s (1365MB/s), 1302MiB/s-1302MiB/s (1365MB/s-1365MB/s), io=763GiB (819GB), run=600009-600009msecDisk stats (read/write):  vdb: ios=41/624879, merge=0/0, ticks=25/3972394, in_queue=3972447, util=100.00%  vdc: ios=41/624880, merge=0/0, ticks=27/3583845, in_queue=3583902, util=100.00%  vdd: ios=40/624880, merge=0/0, ticks=26/3522861, in_queue=3522906, util=100.00%  vde: ios=40/624876, merge=0/0, ticks=22/4553654, in_queue=4553645, util=100.00%  vdf: ios=39/624880, merge=0/0, ticks=33/3169253, in_queue=3169239, util=100.00%\n\n\n\nå¤šå—ç›˜256Ké¡ºåºè¯»æ€§èƒ½æ¦‚è§ˆ\nèšåˆå¸¦å®½: 1084 MiB&#x2F;s \nèšåˆIOPS: 4334\nå¹³å‡å»¶è¿Ÿ: 7381.77å¾®ç§’ï¼ˆçº¦7æ¯«ç§’ï¼‰\næµ‹è¯•æ•°æ®é‡: 635GiB\n\nfio --ioengine=libaio --direct=1 --rw=read --time_based --refill_buffers --norandommap --randrepeat=0 --group_reporting  --name=fio-randwrite --size=300G --filename=/dev/vdb:/dev/vdc:/dev/vdd:/dev/vde:/dev/vdf --iodepth=32 --runtime=600  --bs=256kfio-randwrite: (g=0): rw=read, bs=(R) 256KiB-256KiB, (W) 256KiB-256KiB, (T) 256KiB-256KiB, ioengine=libaio, iodepth=32fio-3.7Starting 1 processJobs: 1 (f=5): [R(1)][100.0%][r=1112MiB/s,w=0KiB/s][r=4449,w=0 IOPS][eta 00m:00s]fio-randwrite: (groupid=0, jobs=1): err= 0: pid=20560: Sun Sep 14 19:30:40 2025   read: IOPS=4334, BW=1084MiB/s (1136MB/s)(635GiB/600004msec)    slat (usec): min=9, max=1256, avg=24.92, stdev= 8.28    clat (usec): min=657, max=118445, avg=7356.55, stdev=2667.91     lat (usec): min=685, max=118473, avg=7381.77, stdev=2667.87    clat percentiles (usec):     |  1.00th=[ 1762],  5.00th=[ 3130], 10.00th=[ 4080], 20.00th=[ 5211],     | 30.00th=[ 5997], 40.00th=[ 6652], 50.00th=[ 7242], 60.00th=[ 7832],     | 70.00th=[ 8455], 80.00th=[ 9372], 90.00th=[10814], 95.00th=[12125],     | 99.00th=[14615], 99.50th=[15664], 99.90th=[17957], 99.95th=[19006],     | 99.99th=[21365]   bw (  MiB/s): min=  931, max= 1205, per=99.99%, avg=1083.46, stdev=27.93, samples=1200   iops        : min= 3726, max= 4820, avg=4333.83, stdev=111.73, samples=1200  lat (usec)   : 750=0.01%, 1000=0.02%  lat (msec)   : 2=1.50%, 4=7.94%, 10=75.93%, 20=14.59%, 50=0.02%  lat (msec)   : 100=0.01%, 250=0.01%  cpu          : usr=0.79%, sys=14.57%, ctx=2554943, majf=0, minf=559  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=0.1%, 32=100.0%, &gt;=64=0.0%     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%     issued rwts: total=2600625,0,0,0 short=0,0,0,0 dropped=0,0,0,0     latency   : target=0, window=0, percentile=100.00%, depth=32Run status group 0 (all jobs):   READ: bw=1084MiB/s (1136MB/s), 1084MiB/s-1084MiB/s (1136MB/s-1136MB/s), io=635GiB (682GB), run=600004-600004msecDisk stats (read/write):  vdb: ios=520011/0, merge=0/0, ticks=3799217/0, in_queue=3799160, util=100.00%  vdc: ios=520013/0, merge=0/0, ticks=3815168/0, in_queue=3815099, util=100.00%  vdd: ios=520012/0, merge=0/0, ticks=3820941/0, in_queue=3820893, util=100.00%  vde: ios=520012/0, merge=0/0, ticks=3838577/0, in_queue=3838502, util=100.00%  vdf: ios=520010/0, merge=0/0, ticks=3823661/0, in_queue=3823597, util=100.00%\n\n\n\nå¤šå—ç›˜256Kéšæœº7:3æ··å’Œè¯»å†™[root@VM_172_180_centos ~]# fio --ioengine=libaio --direct=1 --rw=rw  --rwmixread=70 --time_based --refill_buffers --norandommap --randrepeat=0 --group_reporting  --name=fio-randwrite --size=300G --filename=/dev/vdb:/dev/vdc:/dev/vdd:/dev/vde:/dev/vdf --iodepth=32  --runtime=600 --bs=256kfio-randwrite: (g=0): rw=rw, bs=(R) 256KiB-256KiB, (W) 256KiB-256KiB, (T) 256KiB-256KiB, ioengine=libaio, iodepth=32fio-3.7Starting 1 processJobs: 1 (f=5): [M(1)][100.0%][r=822MiB/s,w=338MiB/s][r=3287,w=1351 IOPS][eta 00m:00s]fio-randwrite: (groupid=0, jobs=1): err= 0: pid=21771: Sun Sep 14 20:03:22 2025   read: IOPS=3274, BW=819MiB/s (858MB/s)(480GiB/600006msec)    slat (usec): min=9, max=693, avg=25.26, stdev= 8.80    clat (usec): min=897, max=154693, avg=6634.02, stdev=1806.17     lat (usec): min=910, max=154719, avg=6659.59, stdev=1806.11    clat percentiles (usec):     |  1.00th=[ 2606],  5.00th=[ 3752], 10.00th=[ 4424], 20.00th=[ 5211],     | 30.00th=[ 5735], 40.00th=[ 6194], 50.00th=[ 6587], 60.00th=[ 7046],     | 70.00th=[ 7504], 80.00th=[ 8094], 90.00th=[ 8848], 95.00th=[ 9503],     | 99.00th=[10945], 99.50th=[11469], 99.90th=[12780], 99.95th=[13304],     | 99.99th=[15533]   bw (  KiB/s): min=680960, max=946176, per=99.99%, avg=838058.46, stdev=28357.45, samples=1200   iops        : min= 2660, max= 3696, avg=3273.63, stdev=110.79, samples=1200  write: IOPS=1403, BW=351MiB/s (368MB/s)(206GiB/600006msec)    slat (usec): min=6, max=540, avg=25.84, stdev=10.75    clat (usec): min=1066, max=219266, avg=7181.33, stdev=1876.67     lat (usec): min=1095, max=219295, avg=7207.48, stdev=1876.68    clat percentiles (usec):     |  1.00th=[ 2671],  5.00th=[ 4146], 10.00th=[ 4817], 20.00th=[ 5669],     | 30.00th=[ 6259], 40.00th=[ 6718], 50.00th=[ 7177], 60.00th=[ 7635],     | 70.00th=[ 8094], 80.00th=[ 8717], 90.00th=[ 9503], 95.00th=[10159],     | 99.00th=[11600], 99.50th=[12256], 99.90th=[13435], 99.95th=[13960],     | 99.99th=[15008]   bw (  KiB/s): min=278528, max=410624, per=99.99%, avg=359210.00, stdev=16717.13, samples=1200   iops        : min= 1088, max= 1604, avg=1403.15, stdev=65.31, samples=1200  lat (usec)   : 1000=0.01%  lat (msec)   : 2=0.38%, 4=5.53%, 10=90.21%, 20=3.89%, 50=0.01%  lat (msec)   : 100=0.01%, 250=0.01%  cpu          : usr=8.56%, sys=13.71%, ctx=1460581, majf=0, minf=43  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=0.1%, 32=100.0%, &gt;=64=0.0%     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.1%, 64=0.0%, &gt;=64=0.0%     issued rwts: total=1964492,842024,0,0 short=0,0,0,0 dropped=0,0,0,0     latency   : target=0, window=0, percentile=100.00%, depth=32Run status group 0 (all jobs):   READ: bw=819MiB/s (858MB/s), 819MiB/s-819MiB/s (858MB/s-858MB/s), io=480GiB (515GB), run=600006-600006msec  WRITE: bw=351MiB/s (368MB/s), 351MiB/s-351MiB/s (368MB/s-368MB/s), io=206GiB (221GB), run=600006-600006msecDisk stats (read/write):  vdb: ios=392642/168565, merge=0/0, ticks=2592861/1196753, in_queue=3789580, util=100.00%  vdc: ios=393062/168145, merge=0/0, ticks=2598222/1194090, in_queue=3792256, util=100.00%  vdd: ios=393023/168184, merge=0/0, ticks=2596337/1194294, in_queue=3790680, util=100.00%  vde: ios=392274/168932, merge=0/0, ticks=2591293/1199083, in_queue=3790327, util=100.00%  vdf: ios=393198/167999, merge=0/0, ticks=2597884/1193103, in_queue=3791030, util=100.00%\n\n","categories":["å·¥å…·"],"tags":["fio","ç£ç›˜æ€§èƒ½"]},{"title":"å®¹å™¨åŒ–ä¹‹ç»†èŠ‚é—®é¢˜å¤„ç†ç¯‡01","url":"/2025/09/06/%E5%AE%B9%E5%99%A8%E5%8C%96%E4%B9%8B%E7%BB%86%E8%8A%82%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86%E7%AF%8701/","content":"é—®é¢˜ç°è±¡ï¼šå®¹å™¨1ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š\nPID 1ï¼š Javaè¿›ç¨‹\n\nå®¹å™¨2ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š\nPID 1: /sbin/tini -- ./entrypoint.shPID 6: Javaè¿›ç¨‹\n\nå…³é”®åŒºåˆ«åœ¨äºï¼šç¬¬äºŒä¸ªå®¹å™¨çš„entrypoint.shè„šæœ¬å¯èƒ½æ˜¯é€šè¿‡tiniå¯åŠ¨çš„ã€‚è€Œç¬¬ä¸€ä¸ªå®¹å™¨å¯èƒ½æ˜¯ç›´æ¥ä»¥entrypoint.shä½œä¸ºå…¥å£ç‚¹ï¼Œæ²¡æœ‰ä½¿ç”¨tiniï¼Œæ‰€ä»¥åœ¨execæ‰§è¡ŒåJavaè¿›ç¨‹æ›¿æ¢äº†shellè¿›ç¨‹æˆä¸ºPID 1ã€‚\ndocker ps -a --no-trunc |grep xxx #æŸ¥çœ‹docker å¯åŠ¨å‘½ä»¤è¿›è¡Œç¡®è®¤,ä½¿ç”¨docker runæ—¶æŒ‡å®šäº†initç¨‹åºä¸ºtiniã€‚\n\nè¿™æ˜¯å› ä¸ºåœ¨Dockerfileä¸­å¯èƒ½ä½¿ç”¨äº†ç±»ä¼¼ä»¥ä¸‹çš„æŒ‡ä»¤ï¼šENTRYPOINT [â€œ&#x2F;sbin&#x2F;tiniâ€, â€œâ€“â€, â€œ.&#x2F;entrypoint.shâ€]\ncat entrypoint.sh #!/bin/sh -eecho &quot;The application will start in $&#123;APP_SLEEP&#125;s...&quot; &amp;&amp; sleep $&#123;APP_SLEEP&#125;exec /usr/bin/java -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap $&#123;JAVA_OPTS&#125; \\     \t-Djava.security.egd=file:/dev/./urandom \\      -Dtsf.swagger.enabled=false \\     \t-jar /root/app/element-server2*.jar $&#123;RUN_ARGS&#125; &quot;$@&quot;\n\n\ntini çš„ä½œç”¨\n\n1.tini æ˜¯ä¸€ä¸ªè½»é‡çº§çš„åˆå§‹åŒ–ç³»ç»Ÿï¼Œä¸“é—¨ä¸ºå®¹å™¨è®¾è®¡\n\n1.å¯ä»¥ç¡®ä¿å®ƒèƒ½æ­£ç¡®æ¥æ”¶ Docker åœæ­¢å‘½ä»¤å‘é€çš„ä¿¡å·\n\n2.å®ƒä½œä¸º PID 1 è¿è¡Œï¼Œè´Ÿè´£ç®¡ç†å­è¿›ç¨‹ï¼ˆè¿™é‡Œæ˜¯ entrypoint.shï¼‰\n\n3.entrypoint.sh è„šæœ¬ä»ç„¶ä½¿ç”¨ exec å¯åŠ¨ Javaï¼Œä½†æ­¤æ—¶ï¼š\n  exec æ›¿æ¢çš„æ˜¯ entrypoint.sh è¿›ç¨‹ï¼ˆPID 6ï¼‰ï¼Œè€Œä¸æ˜¯ PID 1\n  tini ä¿æŒä¸º PID 1ï¼ŒJava è¿›ç¨‹ä½œä¸ºå…¶å­è¿›ç¨‹è¿è¡Œ\n\n\nä¸¤ç§æ–¹å¼çš„æ¯”è¾ƒ\n\n\nç‰¹æ€§\nç›´æ¥ exec (æ—  tini)\nä½¿ç”¨ tini\n\n\n\nPID 1 è¿›ç¨‹\nJava åº”ç”¨\ntini\n\n\nä¿¡å·å¤„ç†\nåº”ç”¨éœ€è‡ªè¡Œå¤„ç†\ntini ååŠ©å¤„ç†\n\n\nåƒµå°¸è¿›ç¨‹å›æ”¶\nå¯èƒ½å­˜åœ¨é—®é¢˜\nè‡ªåŠ¨å›æ”¶\n\n\nè¿›ç¨‹æ ‘ç»“æ„\næ›´ç®€å•\nç¨å¤æ‚ä½†æ›´å¥å£®\n\n\n","categories":["å®¹å™¨åŒ–"],"tags":["docker"]},{"title":"å®¹å™¨åŒ–ä¹‹ç»†èŠ‚é—®é¢˜å¤„ç†ç¯‡02","url":"/2025/09/07/%E5%AE%B9%E5%99%A8%E5%8C%96%E4%B9%8B%E7%BB%86%E8%8A%82%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86%E7%AF%8702/","content":"èƒŒæ™¯ï¼šé¡¹ç›®ä¸Šéœ€è¦å°†æœåŠ¡çš„æ—¥å¿—éƒ½æ˜¾ç¤ºå‡ºæ¥ï¼Œå¯¹äºæœ‰ä¸¤ç±»æ—¥å¿—æ–‡ä»¶ä¸èƒ½æ­£å¸¸æ˜¾ç¤ºæ—¥å¿—å‡ºæ¥çš„ã€‚æƒ…å†µ1ï¼šä¸šåŠ¡æœåŠ¡ä¸­æœªå°†æœåŠ¡æ—¥å¿—æ‰“å°åœ¨æ—¥å¿—æ–‡ä»¶ä¸­ï¼ŒæŸ¥çœ‹å®¹å™¨æ‰€åœ¨èŠ‚ç‚¹æœ‰æŸ¥çœ‹åˆ°0.log ç±»ä¼¼çš„æ—¥å¿—ï¼Œéœ€è¦ç¡®è®¤è¯¥æ—¥å¿—æ˜¯å¦å°±æ˜¯æœåŠ¡çš„è¿è¡Œæ—¥å¿—ï¼Œç›®å‰é’ˆå¯¹è¯¥ç§æ—¥å¿—äº§ç”Ÿçš„è¿‡ç¨‹æµç¨‹æ¢³ç†\nå®¹å™¨çš„æ ‡å‡†è¾“å‡º&#x2F;var&#x2F;log&#x2F;pods&#x2F;â€¦&#x2F;0.log æ–‡ä»¶çš„äº§ç”Ÿè¿‡ç¨‹æ˜¯ï¼š\nApp è¾“å‡º -&gt; stdout/stderrè¿è¡Œæ—¶æ•è· -&gt; å®¹å™¨è¿è¡Œæ—¶ï¼ˆDocker/containerdï¼‰å°†å…¶å†™å…¥è‡ªå·±çš„ JSON æ—¥å¿—æ–‡ä»¶ä¸­ã€‚kubelet ç»„ç»‡ -&gt; kubelet åˆ›å»ºæ¸…æ™°çš„ç›®å½•ç»“æ„ï¼Œå¹¶é€šè¿‡ç¬¦å·é“¾æ¥æŒ‡å‘å®¹å™¨è¿è¡Œæ—¶çš„åŸå§‹æ—¥å¿—æ–‡ä»¶ã€‚å¯¹å¤–æ¥å£ -&gt; è¿™ä¸ªè·¯å¾„æˆä¸ºäº†è¯¥å®¹å™¨æ—¥å¿—åœ¨èŠ‚ç‚¹ä¸Šçš„æ ‡å‡†åŒ–ã€ç¨³å®šçš„è®¿é—®ç‚¹ã€‚æ— è®ºæ˜¯ç³»ç»Ÿç®¡ç†å‘˜ã€æ—¥å¿—é‡‡é›†ä»£ç†ï¼ˆå¦‚ Filebeatã€Fluentdï¼‰ï¼Œè¿˜æ˜¯ kubectl logs å‘½ä»¤ï¼Œæœ€ç»ˆéƒ½æ˜¯é€šè¿‡è¯»å–è¿™ä¸ªè·¯å¾„ä¸‹çš„æ–‡ä»¶æ¥è·å–æ—¥å¿—å†…å®¹çš„ã€‚kubectl logs å‘½ä»¤çš„å·¥ä½œåŸç†å°±æ˜¯ï¼šapiserver -&gt; å¯¹åº”èŠ‚ç‚¹çš„ kubelet -&gt; kubelet è¯»å– /var/log/pods/.../0.log æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œè§£æ JSON æ ¼å¼ï¼Œåªæå– log å­—æ®µçš„çº¯æ–‡æœ¬ä¿¡æ¯ï¼Œç„¶åæµå¼ä¼ è¾“å›ç»™è¯·æ±‚è€…ã€‚\n\nå…³ç³»ä¸åŒºåˆ«\n\n\nç‰¹æ€§\n/var/log/pods/.../0.log (æºæ–‡ä»¶:ç±»æ¯”æ•°æ®åº“åŸå§‹è¡¨)\nkubectl logs (è§£æåçš„è§†å›¾:ç±»æ¯”æ‰§è¡ŒSQLåçš„è§†å›¾)\n\n\n\nå†…å®¹\nåŸå§‹ã€å®Œæ•´çš„æ•°æ®\nè§£æåã€ç­›é€‰è¿‡çš„å†…å®¹\n\n\næ ¼å¼\nJSONæ ¼å¼ï¼Œæ¯è¡Œä¸€æ¡å®Œæ•´çš„JSONè®°å½•\nçº¯æ–‡æœ¬ï¼Œåªæå–äº†JSONä¸­çš„æ—¥å¿—æ¶ˆæ¯æœ¬èº«\n\n\nå…ƒæ•°æ®\nåŒ…å«ä¸°å¯Œå…ƒæ•°æ®ï¼Œå¦‚å®Œæ•´çš„æ—¶é—´æˆ³ã€æµç±»å‹ï¼ˆstdout&#x2F;stderrï¼‰\nä¸åŒ…å«JSONä¸­çš„å…ƒæ•°æ®ï¼Œä½†å¯èƒ½ä¼šæ ¼å¼åŒ–è¾“å‡ºæ—¶é—´æˆ³ï¼ˆéœ€åŠ  --timestampsï¼‰\n\n\nè®¿é—®æ–¹å¼\nç›´æ¥ç™»å½•åˆ°èŠ‚ç‚¹æœåŠ¡å™¨æŸ¥çœ‹æ–‡ä»¶\né€šè¿‡Kubernetes API Serverè¿œç¨‹æŸ¥è¯¢\n\n\nä¸»è¦ä½¿ç”¨è€…\nç³»ç»Ÿã€æ—¥å¿—é‡‡é›†ä»£ç†ï¼ˆå¦‚Fluentd, Filebeatï¼‰\nå¼€å‘è€…ã€è¿ç»´äººå‘˜\n\n\næƒ…å†µ2ï¼šä¸šåŠ¡æœåŠ¡ä¸­æ—¥å¿—æ‰“å°æ˜¾ç¤ºæ˜¯éœ€è¦æ—¥å¿—æ–‡ä»¶çš„æŒ‚è½½ï¼Œç›®å‰æŒ‚è½½æ–‡ä»¶æ—¥å¿—æ˜¾ç¤ºå¦‚ä¸‹ã€‚mountPath: &#x2F;root&#x2F;app (æœåŠ¡å¯åŠ¨jaråœ¨æ”¹ç›®å½•) åˆ™ä¼šæŒ‚è½½å¤±è´¥ã€‚åŸå› :å…±äº«å·ä¼šæŠŠå…¶ä»–é•œåƒå†…ç½®çš„æ–‡ä»¶æ¸…ç©ºçš„ã€‚æ‰€ä»¥ä½¿ç”¨è¯¥ç§æ–¹å¼æœ€å¥½ç»Ÿä¸€æ”¾åœ¨æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹æ˜¯è¯¥ç§æƒ…å†µçš„æœ€ä½³å®è·µ\n        volumeMounts:        - mountPath: /root/app/log          name: test-log-l9ynkeyd-1...      volumes:      - emptyDir: &#123;&#125;        name: test-log-l9ynkeyd-1\n\nå­˜å‚¨ç±»å‹æ€»ç»“å¯¹æ¯”è¡¨æ ¼:\n\n\nå­˜å‚¨ç±»å‹\næ¦‚å¿µç†è§£\nç”Ÿå‘½å‘¨æœŸ\n\n\n\nemptyDir\nä¸´æ—¶å­˜å‚¨ï¼Œä¼šåœ¨èŠ‚ç‚¹åˆ›å»ºç©ºç›®å½•\nç”Ÿå‘½å‘¨æœŸ&#x3D;pod\n\n\nhostPath\nå…è®¸æŒ‚è½½å®¿ä¸»æœºæ–‡ä»¶åˆ°pod\nç”Ÿå‘½å‘¨æœŸ&#x3D;å®¿ä¸»æœº\n\n\nPVC&#x2F;PV\nKubernetesä¸­æŒä¹…å­˜å‚¨çš„æŠ½è±¡ï¼Œç”¨æˆ·é€šè¿‡å£°æ˜PVCè¯·æ±‚å­˜å‚¨èµ„æºï¼Œè€ŒPVCä¼šç»‘å®šåˆ°æ»¡è¶³å…¶éœ€æ±‚çš„PV\næŒä¹…å­˜å‚¨\n\n\nStorageClass\nå¤šä¸ªStorageClassï¼Œç”¨æˆ·åœ¨åˆ›å»ºPVCæ—¶æŒ‡å®šStorageClassåç§°ï¼Œä»¥åŠ¨æ€ç”³è¯·å­˜å‚¨èµ„æºã€‚\næŒä¹…å­˜å‚¨\n\n\nè¯¦ç»†åœºæ™¯è¯´æ˜\n","categories":["å®¹å™¨åŒ–"],"tags":["docker","å­˜å‚¨"]},{"title":"æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢","url":"/2025/09/06/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/","content":"æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼\nä¸€ä¸‹æ˜¯å¼€å¯æˆ‘åšå®¢çš„å¼€å§‹ä¹‹è·¯\nä¸€ã€åˆ›å»ºäº Hexo + GitHub Pages çš„æ­å»ºä¸ªäººåšå®¢ç½‘ç«™çš„è¯¦ç»†æ•™ç¨‹\näºŒã€æ›´æ–°åšå®¢çš„æºç ï¼ˆMarkdownæ–‡ç« ã€ä¸»é¢˜ã€é…ç½®ç­‰ï¼‰é€šå¸¸å­˜æ”¾åœ¨ä¸€ä¸ªGitHubä»“åº“ä¸­ï¼Œè€Œé€šè¿‡Hexoç”Ÿæˆçš„é™æ€ç½‘ç«™æ–‡ä»¶åˆ™éƒ¨ç½²åˆ°GitHub Pagesï¼ˆé€šå¸¸æ˜¯ username.github.io ä»“åº“çš„ç‰¹å®šåˆ†æ”¯ï¼Œå¦‚ gh-pages æˆ– mainï¼‰ã€‚\n\nğŸ“ æ‰‹åŠ¨æ›´æ–°å‘å¸ƒæµç¨‹ï¼ˆæœ¬åœ°å®Œæˆï¼‰è¿™ç§æ–¹å¼éœ€è¦åœ¨è®¡ç®—æœºä¸Šé…ç½®å¥½Hexoç¯å¢ƒï¼ˆNode.js, Git, Hexoç­‰ï¼‰ã€‚\n\næ–°å»ºåšæ–‡ï¼šä½¿ç”¨å‘½ä»¤åˆ›å»ºæ–°çš„Markdownæ–‡ä»¶ã€‚\nhexo new &quot;æ–‡ç« é¢˜ç›®&quot;  # æˆ– hexo n &quot;æ–‡ç« é¢˜ç›®&quot;\n\n\n\nè¿™ä¼šåœ¨ source/_posts ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª æ–‡ç« é¢˜ç›®.md æ–‡ä»¶ã€‚\n\nç¼–å†™&#x2F;æ›´æ–°å†…å®¹ï¼šç”¨æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆå¦‚VS Codeï¼‰ç¼–è¾‘ç”Ÿæˆçš„Markdownæ–‡ä»¶ã€‚\n\nç”Ÿæˆé™æ€æ–‡ä»¶ï¼šåœ¨Hexoç«™ç‚¹æ ¹ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤ï¼Œå°†Markdownè½¬æ¢ä¸ºHTMLç­‰é™æ€èµ„æºã€‚\nhexo generate  # æˆ– hexo g\n\n\n\nå¦‚æœéœ€è¦å…ˆæ¸…é™¤ç¼“å­˜å’Œæ—§æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ï¼š\nhexo clean &amp;&amp; hexo generate```:cite[1]\n\n\n\næœ¬åœ°é¢„è§ˆï¼ˆå¯é€‰ä½†æ¨èï¼‰ï¼šåœ¨éƒ¨ç½²å‰ï¼Œæœ€å¥½å…ˆåœ¨æœ¬åœ°å¯åŠ¨æœåŠ¡å™¨æ£€æŸ¥æ•ˆæœã€‚\nhexo server  # æˆ– hexo s \n\n\n\nç„¶ååœ¨æµè§ˆå™¨ä¸­è®¿é—® http://localhost:4000 æŸ¥çœ‹ã€‚\n\néƒ¨ç½²åˆ°GitHub Pagesï¼šå°†ç”Ÿæˆå¥½çš„é™æ€æ–‡ä»¶ï¼ˆé€šå¸¸åœ¨ public ç›®å½•ï¼‰æ¨é€è‡³GitHubä»“åº“çš„ç‰¹å®šåˆ†æ”¯ã€‚\nhexo deploy  # æˆ– hexo d\n\n\n\nå¸¸ç”¨çš„ä¾¿æ·ç»„åˆå‘½ä»¤æ˜¯ï¼š\nhexo clean &amp;&amp; hexo g &amp;&amp; hexo dä¸ºäº†èƒ½ä½¿ç”¨ `hexo deploy` å‘½ä»¤ï¼Œæ‚¨éœ€è¦ï¼šåœ¨Hexoçš„**ç«™ç‚¹é…ç½®æ–‡ä»¶** (`_config.yml`) ä¸­æ­£ç¡®è®¾ç½®éƒ¨ç½²ä¿¡æ¯:    deploy:      type: git      repo: &lt;æ‚¨çš„GitHubä»“åº“SSHæˆ–HTTPSåœ°å€&gt;  # ä¾‹å¦‚ git@github.com:username/username.github.io.git      branch: &lt;éƒ¨ç½²åˆ†æ”¯ï¼Œå¦‚gh-pagesæˆ–main&gt; \n\n\nç¡®ä¿å·²å®‰è£… hexo-deployer-git æ’ä»¶:cite[4]:cite[6]ï¼šnpm install hexo-deployer-git --save\n\n\næ¨é€æºç ï¼ˆé‡è¦ï¼‰ï¼šhexo deploy é€šå¸¸åªéƒ¨ç½²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ã€‚åˆ«å¿˜äº†å°†æ‚¨çš„åšå®¢æºç ï¼ˆMarkdownæ–‡ç« ã€ä¸»é¢˜ã€é…ç½®æ–‡ä»¶ç­‰ï¼‰ä¹Ÿæ¨é€åˆ°GitHubä»“åº“çš„å¦ä¸€ä¸ªåˆ†æ”¯ï¼ˆä¾‹å¦‚ source æˆ– hexo-sourceï¼‰ï¼Œä»¥ä¾¿å¤‡ä»½å’Œåœ¨å¤šè®¾å¤‡é—´åŒæ­¥ã€‚\n\n\nä¸‰ã€next å®¢åˆ¶åŒ–é¡µé¢3.1 å­—ä½“è®¾ç½®\nfont:  #enable: false  enable: true  # Uri of fonts host, e.g. https://fonts.googleapis.com (Default).  host:  # Font options:  # `external: true` will load this font family from `host` above.  # `family: Times New Roman`. Without any quotes.  # `size: x.x`. Use `em` as unit. Default: 1 (16px)  # Global font settings used for all elements inside &lt;body&gt;.  global:    external: true    family: sans-serif    size: 0.725em  # Font settings for site title (.site-title).  title:    external: true    family:    size:  # Font settings for headlines (&lt;h1&gt; to &lt;h6&gt;).  headings:    external: true    family:    size:  # Font settings for posts (.post-body).  posts:    external: true    family:  # Font settings for &lt;code&gt; and code blocks.  #Roboto  codes:    external: true    family: Fira Code      size: .6em\n\n\n\n3.2 é¡µé¢å­—ä½“è®¾ç½®\ncat  themes/next/source/css/_variables/base.styl$font-size-base           = (hexo-config(&#x27;font.enable&#x27;) and hexo-config(&#x27;font.global.size&#x27;) is a &#x27;unit&#x27;) ? unit(hexo-config(&#x27;font.global.size&#x27;), em) : .8125em;//$font-size-base           = .8125em; #ç»Ÿä¸€æ›´æ”¹è¿™ä¸ªå¤§å°\n\n3.3 ç”Ÿæ•ˆå¹¶éƒ¨ç½²\nhexo clean &amp;&amp; hexo g &amp;&amp; hexo d #æ¸…é™¤ç¼“å­˜ä¸”æµè§ˆå™¨ä¹Ÿéœ€æ— ç—•\n\n3.4 å›¾ç‰‡é—®é¢˜ä¸è®¾ç½®\n#å‚æ•°å¼€å¯+æ’ä»¶å®‰è£…+ç”¨hexo n æ–‡æ¡£ å»ç”Ÿæˆæ–‡æ¡£æ–‡ä»¶1.å°†_config.yml æ–‡ä»¶ä¸­çš„post_asset_folder é€‰é¡¹è®¾ä¸º true æ¥æ‰“å¼€2.npm install https://github.com/CodeFalling/hexo-asset-image --save\n\nå›¾ç‰‡è®¾ç½®ä¸ç”Ÿæ•ˆ  æ ‡ç­¾ä¸åˆ†ç±»é…ç½®  ç«™ç‚¹å¯¼èˆª\n","categories":["æ‚ç¯‡"]},{"title":"è®°ä¸€æ¬¡ç½‘å¡ä¿®æ”¹åŠnmcli ä½¿ç”¨","url":"/2025/09/06/%E8%AE%B0%E4%B8%80%E6%AC%A1%E7%BD%91%E5%8D%A1%E4%BF%AE%E6%94%B9%E5%8F%8Anmcli-%E4%BD%BF%E7%94%A8/","content":"å› éœ€è¦ä¿®æ”¹ç³»ç»Ÿå‚æ•°ç½‘å¡é˜Ÿåˆ—ï¼Œéœ€è¦å°†å…¶æœºå™¨éœ€è¦é‡å¯ã€‚ç›®å‰å‘ç°é›†ç¾¤ä¸€å…±100å¤šå°æœºå™¨ï¼Œé‡å¯å…¶ä¸­ä¸€å°masteræœºå™¨åï¼Œä¸€ç›´å¤„äºnotReadyçŠ¶æ€ã€‚åŸå› æ˜¯å› ä¸ºæ”¹æœºå™¨ä¸ºåŒç½‘å¡ï¼Œä½†æ˜¯å› ä¸ºç½‘å¡åæœªå›ºå®šã€‚é€ æˆä½¿ç”¨ä¸ºå›ºå®šçš„ç½‘å¡æœªå¯åŠ¨æˆåŠŸã€‚\nè§£å†³æ€è·¯ï¼š\n1. æŸ¥è¯¢100å¤šå°æœºå™¨ï¼Œ/etc/udev/rules.d/70-persistent-net.rules  æ–‡ä»¶æ˜¯å¦éƒ½å«2æ¡è®°å½•2.é’ˆå¯¹æœªå«çš„èŠ‚ç‚¹æ“ä½œï¼Œæ·»åŠ è¯¥æ¡ä¿¡æ¯ï¼Œç½‘å¡åä¸å¯ä¿®æ”¹ï¼Œè¦ä¸åŸå…ˆé‡å¯å‰ä¸€è‡´ã€‚æ·»åŠ åå¦‚ä¸‹ï¼šSUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, DRIVERS==&quot;?*&quot;, ATTR&#123;address&#125;==&quot;fa:16:3e:98:70:9c&quot;, NAME=&quot;ens3&quot;SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, DRIVERS==&quot;?*&quot;, ATTR&#123;address&#125;==&quot;fa:16:3e:f5:e0:f1&quot;, NAME=&quot;ens10&quot; #æ›´æ–°çš„ç›®æ ‡ç½‘å¡å\n\næ‹“å±•ï¼šå› åŠ çš„ç½‘å¡åå˜æ›´ä¸ºens4ï¼Œé€ æˆç½‘å¡ä¸€ç›´upä¸èµ·æ¥ã€‚\n[root@tcs-10-25-83-48 network-scripts]# nmcli  device conn ens4é”™è¯¯ï¼šæ·»åŠ /æ¿€æ´»æ–°è¿æ¥å¤±è´¥ï¼šConnection &#x27;ens4&#x27; is not available on device ens4 because device is strictly unmanaged\nnmcliå¤„ç†è¿‡ç¨‹ï¼šnmcli conn show  #æŸ¥çœ‹è®¾å¤‡è¿æ¥æƒ…å†µnmcli conn show &quot;System ens4&quot; #æŸ¥çœ‹ç½‘å¡è®¾ç½®çš„è¯¦æƒ…nmcli conn reload #é‡å¯è®¾å¤‡nmcli conn up ens4 #è¿æ¥ens4è®¾ç½®nmcli device set &lt;ç½‘å¡åç§°&gt; managed yes #æ¿€æ´»ç½‘å¡nmcli device #æŸ¥çœ‹æ‰€æœ‰çš„è®¾å¤‡nmcli device conn #å°†æ‰€æœ‰è®¾å¤‡connnmcli device conn ens4 #ç½‘å¡è¿æ¥nmcli  networking #æŸ¥çœ‹ç½‘ç»œæ˜¯ç”±è®¾ç½®\n\nåŸå› ï¼š\n[root@X-x.1-x.1-x.1-x.1 network-scripts]# cd /etc/NetworkManager/conf.d/[root@X-x.1-x.1-x.1-x.1 conf.d]# ls99-cloud-init.conf  99-container.conf[root@X-x.1-x.1-x.1-x.1 conf.d]# cat 99-cloud-init.conf # Created by cloud-init on instance boot automatically, do not edit.#[main]dns = none[root@X-x.1-x.1-x.1-x.1 conf.d]# cat 99-container.conf# avoid making container interface down[keyfile]unmanaged-devices=*,except:interface-name:ens10,except:interface-name:ens3 #99-container.confï¼Œå› å®¹å™¨å¹³å°éƒ¨ç½²å®Œåï¼Œç½‘å¡åè¢«è·å–åˆ°äº†å¹¶å†™å…¥åˆ°ç±»ä¼¼æ–‡ä»¶ä¸­ï¼Œæ•…ä¸å»ºè®®ä¿®æ”¹ç½‘å¡åç§°(å³NAME=&quot;ens10&quot;)\n\næ‹“å±•ï¼šè®°å½•ä¸€æ¬¡å› bondæ–‡ä»¶é…ç½®é—®é¢˜é€ æˆçš„äº¤æ¢æœºç½‘å£å…·æœ‰downçš„æƒ…å†µï¼Œæ²¡æœ‰nmcliå·¥å…·éœ€è¦é…ç½®ç½‘å¡é…ç½®bond4ï¼Œé…ç½®ä¿¡æ¯åŠå…¶å«ä¹‰ï¼Œè®°å½•æ­£å¸¸çš„é…ç½®ä¿¡æ¯åŠå¦‚ä½•å†æœºå™¨èŠ‚ç‚¹ä¸Šè¿›è¡Œæ’æŸ¥ç¡®è®¤ç½‘å£bondæ­£å¸¸\nifcfg-eth0#IP Config for eth0:DEVICE=&#x27;eth0&#x27;HWADDR=xxONBOOT=&#x27;yes&#x27;USERCTL=noBOOTPROTO=noneSLAVE=yes  # ä¿®æ­£æ‹¼å†™é”™è¯¯MASTER=bond1NM_CONTROLLED=no  # æ·»åŠ æ­¤è¡Œ\n\nifcfg-eth1#IP Config for eth1:DEVICE=&#x27;eth1&#x27;HWADDR=xxxxxONBOOT=&#x27;yes&#x27;MASTER=bond1SLAVE=yesUSERCTL=no  # ä¿®æ­£ä¸ºæœ‰æ•ˆå€¼BOOTPROTO=noneNM_CONTROLLED=no  # æ·»åŠ æ­¤è¡Œ\n\nifcfg-bond1#IP Config for bond1:DEVICE=bond1BOOTPROTO=noneIPADDR=10.215.173.44NETMASK=255.255.255.128GATEWAY=10.215.173.1USERCTL=noONBOOT=&#x27;yes&#x27;TYPE=Bond  # æ·»åŠ æ­¤è¡ŒBONDING_OPTS=&#x27;miimon=100 mode=4 ad_select=0 lacp_rate=fast updelay=200 xmit_hash_policy=2&#x27;  # ä¿®æ­£å‚æ•°NM_CONTROLLED=no  # æ·»åŠ æ­¤è¡Œ#mode=4ï¼šè¡¨ç¤ºIEEE 802.3adåŠ¨æ€é“¾è·¯èšåˆï¼ˆLACPï¼‰#miimon=100ï¼šæ¯100æ¯«ç§’æ£€æŸ¥ä¸€æ¬¡é“¾è·¯çŠ¶æ€#ad_select=1ï¼šé€‰æ‹©ç­–ç•¥ï¼Œ1è¡¨ç¤ºå¤‡ä»½æ¨¡å¼ï¼ˆä½†æ ¹æ®bondingæ–‡æ¡£ï¼Œad_selectçš„å¯èƒ½å€¼ä¸º0ã€1ã€2ï¼Œ1è¡¨ç¤ºâ€œå¤‡ä»½â€ä¼¼ä¹ä¸å¯¹ï¼Œé€šå¸¸ad_select=0ï¼ˆstableï¼‰æˆ–1ï¼ˆbandwidthï¼‰æˆ–2ï¼ˆcountï¼‰ï¼‰æ³¨æ„ï¼šad_select=1å®é™…ä¸Šè¡¨ç¤ºâ€œå¸¦å®½â€ï¼ˆbandwidthï¼‰ï¼Œå³é€‰æ‹©æ´»åŠ¨èšåˆç»„ä¸­å¸¦å®½æœ€å¤§çš„ç«¯å£ã€‚#lacp_rate=fastï¼šLACPé€Ÿç‡ï¼Œfastè¡¨ç¤ºæ¯1ç§’å‘é€ä¸€æ¬¡LACPæŠ¥æ–‡ï¼ˆæ…¢é€Ÿä¸º30ç§’ï¼‰#updelay=0ï¼šå¯ç”¨ç«¯å£çš„å»¶è¿Ÿæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œä½†è¿™é‡Œè®¾ç½®äº†ä¸¤æ¬¡updelayï¼Œç¬¬ä¸€ä¸ªä¸º0ï¼Œç¬¬äºŒä¸ªä¸º200ï¼Œè¿™å¯èƒ½ä¼šè¢«æœ€åä¸€ä¸ªå€¼è¦†ç›–ã€‚å®é™…ä¸Šï¼Œåœ¨#BONDING_OPTSä¸­ï¼ŒåŒä¸€ä¸ªå‚æ•°å‡ºç°å¤šæ¬¡ï¼Œé€šå¸¸æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚æ‰€ä»¥updelay=200å¯èƒ½ä¼šè¦†ç›–å‰é¢çš„0ã€‚#xmit_hash_policy=2ï¼šä¼ è¾“å“ˆå¸Œç­–ç•¥ï¼Œ2è¡¨ç¤ºä½¿ç”¨å±‚3+4ï¼ˆIPå’Œç«¯å£ï¼‰çš„å“ˆå¸Œã€‚\n\né…ç½®é—®é¢˜åˆ†æ\n ifcfg-bond1 ä¸­çš„é—®é¢˜\n\né‡å¤çš„ updelay å‚æ•°ï¼šupdelay=0 å’Œ updelay=200 åŒæ—¶å­˜åœ¨,æœ€ç»ˆç”Ÿæ•ˆçš„æ˜¯æœ€åä¸€ä¸ªï¼Œå³ updelay&#x3D;200ã€‚\nad_select&#x3D;1ï¼šåœ¨æŸäº›ç³»ç»Ÿç‰ˆæœ¬ä¸­å¯èƒ½ä¸è¢«æ”¯æŒ\n\nchecké…ç½®å¥½åçš„çŠ¶æ€\n1.ping ç½‘å…³ \n2.&#x2F;proc&#x2F;net&#x2F;bonding&#x2F;bond1\nBonding Mode: IEEE 802.3ad Dynamic link aggregation - æ­£ç¡®ï¼Œæ¨¡å¼ä¸º4ã€‚MII Status: up - ç»‘å®šæ¥å£çŠ¶æ€æ­£å¸¸ã€‚Slave Interface: eth0 å’Œ eth1 éƒ½æ˜¯ upï¼Œé€Ÿåº¦å‡ä¸º 25000 Mbpsï¼Œå…¨åŒå·¥ï¼Œé“¾è·¯å¤±è´¥è®¡æ•°ä¸º0ï¼Œç‰©ç†åœ°å€æ­£ç¡®ã€‚Aggregator ID: ä¸¤ä¸ªæ¥å£çš„ Aggregator ID éƒ½æ˜¯ 1 - è¿™è¡¨ç¤ºä¸¤ä¸ªæ¥å£æˆåŠŸèšåˆåˆ°åŒä¸€ä¸ªèšåˆç»„ä¸­ã€‚Actor/Partner Churn State: å‡ä¸º noneï¼Œè¡¨ç¤ºæ²¡æœ‰å‘ç”Ÿæ‰°åŠ¨ï¼Œè¿æ¥ç¨³å®šã€‚Partner Mac Address: ä¸¤ä¸ªæ¥å£çš„ Partner Mac Address éƒ½æ˜¯ 00:01:00:01:00:01ï¼Œè¿™è¡¨ç¤ºå®ƒä»¬è¿æ¥åˆ°åŒä¸€ä¸ªå¯¹ç«¯è®¾å¤‡ï¼ˆäº¤æ¢æœºï¼‰ã€‚\n\n3.ä½¿ç”¨ ethtool eth0 å’Œ ethtool eth1 å†æ¬¡ç¡®è®¤é“¾è·¯çŠ¶æ€ä¸º Link detected: yes ä¸”é€Ÿç‡ä¸º 25000Mb&#x2F;sã€‚\n","categories":["Linux"],"tags":["nmcli","bond"]},{"title":"å®¹å™¨åŒ–ä¹‹ç»†èŠ‚é—®é¢˜å¤„ç†ç¯‡03","url":"/2025/09/11/%E5%AE%B9%E5%99%A8%E5%8C%96%E4%B9%8B%E7%BB%86%E8%8A%82%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86%E7%AF%8703/","content":"Warning  SystemLoadIsFull  56s (x1313 over 2d2h)  custom-plugin-monitor  (combined from similar events): system load/cores percent exceeded threshold 80%, load/cores percent: 118.09%, load15m: 37.79\n\nå‘Šè­¦ä¿¡æ¯è§£è¯»è§¦å‘æ—¶é•¿ï¼š 56s (x1313 over 2d2h)\n\n56s ï¼š æœ¬æ¬¡å‘Šè­¦æŒç»­äº†56ç§’ï¼ˆå¯èƒ½åˆšåˆšæ¢å¤æˆ–æ­£åœ¨è§¦å‘ï¼‰ã€‚\nx1313 over 2d2h **ï¼š å®ƒåœ¨è¿‡å» 2å¤©2å°æ—¶ å†…å·²ç»è§¦å‘äº† 1313æ¬¡ã€‚\n\nç›‘æ§æºï¼š custom-plugin-monitor\nå‘Šè­¦åŸå› ï¼š system load/cores percent exceeded threshold 80%\n\nå‘Šè­¦è§„åˆ™æ˜¯ï¼šï¼ˆè´Ÿè½½å¹³å‡å€¼ &#x2F; CPUæ ¸å¿ƒæ•°ï¼‰çš„ç™¾åˆ†æ¯” &gt; 80% å³è§¦å‘å‘Šè­¦ã€‚\n\nå…·ä½“æ•°å€¼ï¼š load/cores percent: 118.09%, load15m: 37.79\n\nload15m: 37.79 **ï¼š è¿‡å»15åˆ†é’Ÿçš„ç³»ç»Ÿå¹³å‡è´Ÿè½½æ˜¯ 37.79ã€‚\nload/cores percent: 118.09% ï¼š ** (37.79 &#x2F; æ ¸å¿ƒæ•°) * 100% &#x3D; 118.09% **ã€‚\n\næ ¸å¿ƒé—®é¢˜è®¡ç®—ä¸ç¡®è®¤æ ¹æ®å‘Šè­¦æä¾›çš„ç™¾åˆ†æ¯”ï¼Œæˆ‘ä»¬å¯ä»¥åæ¨å‡ºç›‘æ§ç³»ç»Ÿè®¤ä¸ºçš„CPUæ ¸å¿ƒæ•°ï¼š\næ ¸å¿ƒæ•° = load15m / (load/cores percent) = 37.79 / 1.1809 â‰ˆ 32 ä¸ªæ ¸å¿ƒ\n\nç»“è®ºï¼š\n\nå‘Šè­¦é˜ˆå€¼æ˜¯ 80%ï¼Œå³å½“è´Ÿè½½è¶…è¿‡ 0.8 * 32 = 25.6 æ—¶å°±ä¼šå‘Šè­¦ã€‚\nè€Œå½“å‰è´Ÿè½½è¾¾åˆ°äº† 37.79ï¼Œæ˜¯é˜ˆå€¼çš„ ~1.5å€ï¼Œè¶…å‡ºç¨‹åº¦å¾ˆé«˜ã€‚\nè´Ÿè½½&#x2F;æ ¸å¿ƒæ¯”è¾¾åˆ°äº† **118%**ï¼Œæ„å‘³ç€å¹³å‡æœ‰ 37.79ä¸ªè¿›ç¨‹ åœ¨ç«äº‰ 32ä¸ªCPUæ ¸å¿ƒï¼Œå¹³å‡è‡³å°‘æœ‰ 5-6ä¸ªè¿›ç¨‹ åœ¨æ°¸è¿œåœ°æ’é˜Ÿç­‰å¾…ï¼Œç³»ç»Ÿé•¿æœŸå¤„äºä¸¥é‡è¿‡è½½çŠ¶æ€ã€‚\n\nTOPçš„ä¿¡æ¯è§£è¯»\nè´Ÿè½½æ˜¯ï¼š 26.05, 37.57, 43.67 (1åˆ†é’Ÿï¼Œ5åˆ†é’Ÿï¼Œ15åˆ†é’Ÿå¹³å‡è´Ÿè½½)\nåƒåªæœ‰32ä¸ªæ”¶é“¶å°ï¼Œå´å¹³å‡æœ‰43.67ä¸ªé¡¾å®¢è¦ç»“è´¦ã€‚è¿™æ„å‘³ç€å¹³å‡æœ‰è¶…è¿‡11ä¸ªè¿›ç¨‹ä¸€ç›´åœ¨æ’é˜Ÿç­‰å¾…è·å¾—CPUèµ„æºï¼ˆæˆ–è€…æ˜¯åœ¨ç­‰å¾…ç£ç›˜I&#x2F;Oå®Œæˆï¼‰ã€‚\n\nç©ºé—²ç‡\nCpu0: us 13.9%, sy 9.9%, id 73.5% -&gt; ç©ºé—²ç‡73.5%ï¼Œè¿˜ç®—ç©ºé—²ã€‚Cpu16: us 17.2%, sy 10.5%, id 69.9% -&gt; ç©ºé—²ç‡69.9%Cpu19: us 19.3%, sy 9.8%, id 67.6% -&gt; ç©ºé—²ç‡67.6%Cpu20: us 22.8%, sy 10.4%, id 64.1% -&gt; ç©ºé—²ç‡64.1%\næœ‰ä¸€äº›æ ¸å¿ƒçš„idleï¼ˆç©ºé—²ï¼‰ç™¾åˆ†æ¯”ä½äº70%ï¼Œè€Œæœ‰äº›æ ¸å¿ƒï¼ˆå¦‚Cpu11, Cpu12, Cpu13, Cpu14, Cpu15ï¼‰çš„ç©ºé—²ç‡åœ¨97%ä»¥ä¸Šã€‚è¿™è¡¨æ˜è´Ÿè½½å¹¶ä¸å‡è¡¡ï¼Œå¯èƒ½æœ‰ä¸€äº›è¿›ç¨‹ç»‘å®šåˆ°äº†ç‰¹å®šçš„CPUæ ¸å¿ƒä¸Šï¼Œæˆ–è€…æŸäº›è¿›ç¨‹åœ¨å¤šä¸ªæ ¸å¿ƒä¸Šè¿è¡Œä½†åˆ†å¸ƒä¸å‡ã€‚\n\né«˜CPUè¿›ç¨‹: \nPID 3995612 (java): å ç”¨396.1% CPU (çº¦4ä¸ªæ ¸å¿ƒçš„æ»¡è½½)\nPID 1677 (dockerd): å ç”¨41.1% CPU\nPID 3995595 (containerd-shim): å ç”¨21.1% CPU\n\nä¸ºä»€ä¹ˆæ‚¨çš„ç³»ç»Ÿè´Ÿè½½é«˜ï¼Œä½†CPUä½¿ç”¨ç‡çœ‹èµ·æ¥ä¸ç®—æé«˜ï¼Ÿ\n1.%wa (I&#x2F;O Wait),å‡ ä¹æ‰€æœ‰æ ¸å¿ƒçš„ %wa éƒ½æ˜¯ 0.0ã€‚æ‰€æœ‰é«˜çº¯ç²¹çš„CPUè®¡ç®—èµ„æºç«äº‰ã€‚\n2.è¿™äº›è¿›ç¨‹å¯¹CPUçš„æ€»éœ€æ±‚ï¼ˆ43.67ï¼‰è¶…è¿‡äº†ç³»ç»Ÿèƒ½åŒæ—¶æä¾›çš„æ•°é‡ï¼ˆ32ï¼‰ï¼Œæ‰€ä»¥å®ƒä»¬å¿…é¡»æ’é˜Ÿã€‚è¿™ä¸ªæ’é˜Ÿé˜Ÿä¼çš„å¹³å‡é•¿åº¦å°±æ˜¯è´Ÿè½½å¹³å‡å€¼(43.67)ã€‚ã€ç†è§£ç­‰äºPIDçš„æ‰€å†å çš„CPUå€¼å¤§äº32ã€‘\n\n\n","categories":["å®¹å™¨åŒ–"],"tags":["k8s","cpu"]}]